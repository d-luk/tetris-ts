{"version":3,"sources":["webpack:///webpack/bootstrap 886445c63d61f0ef4261","webpack:///./src/services/matrix-calculations.ts","webpack:///./src/models/color.ts","webpack:///./src/models/shape.ts","webpack:///./src/interfaces/point.ts","webpack:///./src/index.ts","webpack:///./src/models/board.ts","webpack:///./src/models/panel.ts","webpack:///./src/models/player.ts","webpack:///./src/services/arrays.ts","webpack:///./src/services/random-shape.ts","webpack:///./src/models/shapes/i.ts","webpack:///./src/models/shapes/j.ts","webpack:///./src/models/shapes/l.ts","webpack:///./src/models/shapes/o.ts","webpack:///./src/models/shapes/s.ts","webpack:///./src/models/shapes/t.ts","webpack:///./src/models/shapes/z.ts","webpack:///./src/services/clear-panel.ts","webpack:///./src/services/draw-grid.ts","webpack:///./src/services/draw-matrix.ts","webpack:///./src/settings.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 886445c63d61f0ef4261","import Matrix from '../interfaces/matrix';\r\nimport IPoint from '../interfaces/point';\r\nimport { ISize } from '../interfaces/size';\r\n\r\nexport function createMatrix(size: ISize): Matrix {\r\n    const result: Matrix = [];\r\n    for (let col = 0; col < size.width; col++) {\r\n        result[col] = new Array(size.height);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function copyMatrix(matrix: Matrix): Matrix {\r\n    return matrix.reduce<Matrix>((result, col, x) => {\r\n        result[x] = col.slice();\r\n        return result;\r\n    }, []);\r\n}\r\n\r\n/**\r\n * Merges m1 and m2 into a new matrix with the size of m1\r\n * @param position Position of m2 on m1\r\n */\r\nexport function mergeMatrixes(m1: Matrix, m2: Matrix, position: IPoint, target?: Matrix): Matrix {\r\n    const result = target || copyMatrix(m1);\r\n\r\n    for (let i = 0; i < m2.length; i++) {\r\n        for (let j = 0; j < m2[0].length; j++) {\r\n            const value = m2[i][j];\r\n            if (typeof value === 'undefined') continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x >= 0 && x < m1.length &&\r\n                y >= 0 && y < m1[0].length &&\r\n                (value || !result[x][y])) {\r\n                result[x][y] = value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function addMatrix(target: Matrix, source: Matrix, position: IPoint): void {\r\n    mergeMatrixes(target, source, position, target);\r\n}\r\n\r\n/**\r\n * Transforms matrix to be used in the coordinate system\r\n */\r\nexport function xyMatrix(matrix: Matrix): Matrix {\r\n    return rotateMatrix(matrix)\r\n        .reduce<Matrix>((result, col, x) => {\r\n            // Flip columns\r\n            result[x] = col.reverse();\r\n            return result;\r\n        }, []);\r\n}\r\n\r\n/**\r\n * Rotate a square 2D matrix\r\n */\r\nexport function rotateMatrix(matrix: Matrix, reverse = false): Matrix {\r\n    const l = matrix.length;\r\n    const result = createMatrix({ width: l, height: l });\r\n\r\n    // Apply rotation\r\n    for (let x = 0; x < l; x++) {\r\n        for (let y = 0; y < l; y++) {\r\n            result[x][y] = reverse\r\n                ? matrix[l - y - 1][x]\r\n                : matrix[y][l - x - 1];\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Checks if child is not outside parent matrix\r\n */\r\nexport function matrixContains(parent: Matrix, child: Matrix, position: IPoint): boolean {\r\n    for (let i = 0; i < child.length; i++) {\r\n        const col = child[i];\r\n        for (let j = 0; j < col.length; j++) {\r\n            if (!col[j]) continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x < 0 || x >= parent.length ||\r\n                y < 0 || y >= parent[0].length) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function matrixesColliding(m1: Matrix, m2: Matrix, position: IPoint): boolean {\r\n    for (let x = 0; x < m2.length; x++) {\r\n        for (let y = 0; y < m2[0].length; y++) {\r\n            if (!m2[x][y]) continue;\r\n            if (m1[x + position.x][y + position.y]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/matrix-calculations.ts","export enum Color {\r\n    Yellow = 1,\r\n    Blue = 2,\r\n    Red = 3,\r\n    Green = 4,\r\n    Orange = 5,\r\n    Pink = 6,\r\n    Purple = 7\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/color.ts","import Matrix from '../interfaces/matrix';\r\nimport { rotateMatrix } from '../services/matrix-calculations';\r\n\r\nexport default class Shape {\r\n    private _blocks: Matrix;\r\n    public get blocks() {\r\n        return this._blocks;\r\n    }\r\n\r\n    constructor(blocks: Matrix) {\r\n        this._blocks = blocks;\r\n    }\r\n\r\n    public rotate(reverse = false): void {\r\n        this._blocks = rotateMatrix(this._blocks, reverse);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shape.ts","export default interface IPoint {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport function clonePoint(point: IPoint): IPoint {\r\n    return { x: point.x, y: point.y };\r\n}\r\n\r\nexport function pointEquals(a: IPoint, b: IPoint): boolean {\r\n    return a.x === b.x && a.y === b.y;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/interfaces/point.ts","import { pointEquals } from './interfaces/point';\r\nimport { ISize } from './interfaces/size';\r\nimport Board from './models/board';\r\nimport { getPanel } from './models/panel';\r\nimport Player from './models/player';\r\nimport clearPanel from './services/clear-panel';\r\nimport drawGrid from './services/draw-grid';\r\nimport drawMatrix from './services/draw-matrix';\r\nimport { mergeMatrixes } from './services/matrix-calculations';\r\n\r\n// Read context size\r\nconst el = document.getElementById('game') as HTMLCanvasElement;\r\n\r\nconst ctxSize: ISize = {\r\n    width: el.offsetWidth,\r\n    height: el.offsetHeight\r\n};\r\n\r\n// Fix size on mobile\r\nconst attributeSize: ISize = {\r\n    width: parseInt(el.getAttribute('width') as string, 10),\r\n    height: parseInt(el.getAttribute('height') as string, 10)\r\n};\r\n\r\nif (attributeSize.width !== ctxSize.width) {\r\n    el.setAttribute('width', `${ctxSize.width}`);\r\n}\r\n\r\nif (attributeSize.height !== ctxSize.height) {\r\n    el.setAttribute('height', `${ctxSize.height}`);\r\n}\r\n\r\n// Declare tile count on board\r\nconst boardSize: ISize = {\r\n    width: 16,\r\n    height: 24\r\n};\r\n\r\n// Create panel\r\nconst panel = getPanel('game', ctxSize);\r\nconst board = new Board(boardSize);\r\n\r\n// Place a random shape\r\nconst player = new Player({ x: 7, y: 0 });\r\nlet firstFall = true;\r\n\r\n// Update loop\r\nfunction update(): void {\r\n    const newPos = {\r\n        x: player.position.x,\r\n        y: player.position.y + 1\r\n    };\r\n\r\n    const colliding = board.collides(player.shape.blocks, newPos);\r\n\r\n    if (firstFall && colliding) {\r\n        gameOver();\r\n    } else if (!colliding) {\r\n        firstFall = false;\r\n        player.position = newPos;\r\n    } else {\r\n        // Colliding on non-first fall\r\n        board.place(player.shape, player.position);\r\n\r\n        // Reset player\r\n        player.reset();\r\n        firstFall = true;\r\n\r\n        // Detect immediate collision\r\n        if (board.collides(player.shape.blocks, player.position)) {\r\n            gameOver();\r\n        }\r\n    }\r\n\r\n    draw();\r\n}\r\n\r\nfunction draw(): void {\r\n    const viewMatrix = mergeMatrixes(board.blocks, player.shape.blocks, player.position);\r\n\r\n    clearPanel(panel);\r\n    drawGrid(panel, boardSize);\r\n    drawMatrix(panel, viewMatrix);\r\n}\r\n\r\n// Call update and keep calling it every s seconds\r\nlet interval: number;\r\nconst s = 0.5;\r\nfunction initInterval(): void {\r\n    window.clearInterval(interval);\r\n    update();\r\n    interval = window.setInterval(update, s * 1000);\r\n}\r\ninitInterval();\r\n\r\n// Game over handling\r\nfunction gameOver(): void {\r\n    board.clear();\r\n    player.reset();\r\n    firstFall = true;\r\n}\r\n\r\n// Key handling\r\ndocument.addEventListener('keydown', e => {\r\n\r\n    let newPosition = {\r\n        x: player.position.x,\r\n        y: player.position.y\r\n    };\r\n\r\n    let triggered = true;\r\n    switch (e.code) {\r\n        case 'ArrowUp':\r\n            // Rotate clockwise\r\n            if (e.repeat) return;\r\n            player.shape.rotate();\r\n\r\n            // Push shape back on to the board\r\n            if (!board.contains(player.shape.blocks, newPosition)) {\r\n                newPosition = player.getContainedPosition(board);\r\n            }\r\n\r\n            break;\r\n        case 'ArrowRight':\r\n            // Move right\r\n            newPosition.x++;\r\n            break;\r\n        case 'ArrowDown':\r\n            // Soft drop\r\n            newPosition.y++;\r\n            break;\r\n        case 'ArrowLeft':\r\n            // Move left\r\n            newPosition.x--;\r\n            break;\r\n        case 'Space':\r\n            // Hard drop\r\n            let nextPos = newPosition;\r\n            do {\r\n                nextPos = { x: nextPos.x, y: nextPos.y + 1 };\r\n            } while (board.contains(player.shape.blocks, nextPos));\r\n\r\n            newPosition = { x: nextPos.x, y: nextPos.y - 1 };\r\n            break;\r\n        default:\r\n            triggered = false;\r\n            break;\r\n    }\r\n\r\n    const posChanged = !pointEquals(player.position, newPosition);\r\n\r\n    if (posChanged) {\r\n        if (!board.collides(player.shape.blocks, newPosition)) {\r\n            player.position = newPosition;\r\n            firstFall = false;\r\n        } else initInterval();\r\n    }\r\n\r\n    if (triggered) draw();\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/index.ts","import Matrix from '../interfaces/matrix';\r\nimport IPoint from '../interfaces/point';\r\nimport { ISize } from '../interfaces/size';\r\nimport { addMatrix, matrixContains, matrixesColliding } from '../services/matrix-calculations';\r\nimport Shape from './shape';\r\n\r\nexport default class Board {\r\n    private _blocks: Matrix;\r\n    public get blocks() { return this._blocks; }\r\n\r\n    public readonly size: ISize;\r\n\r\n    constructor(size: ISize) {\r\n        this.size = size;\r\n        this.clear();\r\n    }\r\n\r\n    public place(shape: Shape, position: IPoint): void {\r\n        addMatrix(this.blocks, shape.blocks, position);\r\n\r\n        this.getFullRows()\r\n            .forEach(row => this.deleteRow(row));\r\n    }\r\n\r\n    private getFullRows(): number[] {\r\n        const rowCount = this._blocks[0].length;\r\n        const incompleteRows = new Array<boolean>(rowCount - 1);\r\n\r\n        rows:\r\n        for (let y = 0; y < rowCount; y++) {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let x = 0; x < this._blocks.length; x++) {\r\n                if (!this._blocks[x][y]) {\r\n                    incompleteRows[y] = true;\r\n                    continue rows;\r\n                }\r\n            }\r\n        }\r\n\r\n        const result: number[] = [];\r\n        for (let row = 0; row < rowCount; row++) {\r\n            if (!incompleteRows[row]) result.push(row);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private deleteRow(row: number): void {\r\n        this._blocks.forEach(col => {\r\n            col.splice(row, 1);\r\n            col.unshift(undefined);\r\n        });\r\n    }\r\n\r\n    public clear(): void {\r\n        this._blocks = [];\r\n        for (let x = 0; x < this.size.width; x++) {\r\n            this._blocks[x] = new Array(this.size.height);\r\n        }\r\n    }\r\n\r\n    public contains(matrix: Matrix, position: IPoint): boolean {\r\n        return matrixContains(this._blocks, matrix, position);\r\n    }\r\n\r\n    public collides(matrix: Matrix, position: IPoint): boolean {\r\n        return !this.contains(matrix, position)\r\n            || matrixesColliding(this.blocks, matrix, position);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/board.ts","import { ISize } from '../interfaces/size';\r\n\r\nexport default interface IPanel {\r\n    ctx: CanvasRenderingContext2D;\r\n    size: ISize;\r\n}\r\n\r\nexport function getPanel(canvasID: string, size: ISize): IPanel {\r\n    const canvas = document.getElementById(canvasID) as HTMLCanvasElement;\r\n    if (!canvas) throw new Error('Canvas not found!');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) throw new Error('Context not found!');\r\n\r\n    return { ctx, size };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/panel.ts","import IPoint, { clonePoint } from '../interfaces/point';\r\nimport { findAny, findIndex } from '../services/arrays';\r\nimport getRandomShape from '../services/random-shape';\r\nimport Board from './board';\r\nimport Shape from './shape';\r\n\r\nexport default class Player {\r\n    private _shape: Shape;\r\n    public get shape() {\r\n        return this._shape;\r\n    }\r\n\r\n    public position: IPoint;\r\n    private _startingPos: IPoint;\r\n\r\n    constructor(startingPosition: IPoint) {\r\n        this._startingPos = startingPosition;\r\n        this.reset();\r\n    }\r\n\r\n    public reset(): void {\r\n        this.position = clonePoint(this._startingPos);\r\n        this._shape = getRandomShape();\r\n    }\r\n\r\n    /**\r\n     * Calculates a position for\r\n     * the player to be fully on the board\r\n     */\r\n    public getContainedPosition(board: Board): IPoint {\r\n        const position = clonePoint(this.position);\r\n\r\n        // Find lowest x value\r\n        const xLow = (findIndex(this._shape.blocks, col => {\r\n            // Column contains a value\r\n            return findAny(col, value => !!value);\r\n        }) as number) + position.x;\r\n\r\n        // Push shape to the right\r\n        if (xLow < 0) {\r\n            position.x += 0 - xLow;\r\n            return position;\r\n        }\r\n\r\n        // Find highest x value\r\n        const xHigh = this._shape.blocks.length -\r\n            (findIndex(this._shape.blocks.reverse(), col => {\r\n                // Column contains a value\r\n                return findAny(col, value => !!value);\r\n            }) as number) + position.x;\r\n\r\n        // Push shape to the left\r\n        if (xHigh > board.blocks.length) {\r\n            position.x -= xHigh - board.blocks.length;\r\n            return position;\r\n        }\r\n\r\n        return position;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/player.ts","export function findIndex<T>(array: T[], predicate: (item: T, index: number) => boolean): number | undefined {\r\n    for (let i = 0; i < array.length; i++) {\r\n        const value = array[i];\r\n        if (predicate(value, i)) {\r\n            return i;\r\n        }\r\n    }\r\n}\r\n\r\nexport function findAny<T>(array: T[], predicate: (item: T, index: number) => boolean): boolean {\r\n    return typeof findIndex(array, predicate) !== 'undefined';\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/arrays.ts","import I from '../models/shapes/i';\r\nimport J from '../models/shapes/j';\r\nimport L from '../models/shapes/l';\r\nimport O from '../models/shapes/o';\r\nimport S from '../models/shapes/s';\r\nimport T from '../models/shapes/t';\r\nimport Z from '../models/shapes/z';\r\n\r\nconst shapes = [I, J, L, O, S, T, Z];\r\n\r\nexport default function getRandomShape() {\r\n    const Shape = shapes[Math.floor(Math.random() * shapes.length)];\r\n    return new Shape();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/random-shape.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Blue;\r\n\r\nexport default class I extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/i.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Pink;\r\n\r\nexport default class J extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0],\r\n            [0, c, 0],\r\n            [c, c, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/j.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Orange;\r\n\r\nexport default class L extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0],\r\n            [0, c, 0],\r\n            [0, c, c]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/l.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Yellow;\r\n\r\nexport default class O extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c],\r\n            [c, c]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/o.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Red;\r\n\r\nexport default class S extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, c],\r\n            [c, c, 0],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/s.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Purple;\r\n\r\nexport default class T extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c, c],\r\n            [0, c, 0],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/t.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Green;\r\n\r\nexport default class Z extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c, 0],\r\n            [0, c, c],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/z.ts","import IPanel from '../models/panel';\r\n\r\nexport default function clearPanel(panel: IPanel): void {\r\n    panel.ctx.clearRect(0, 0, panel.size.width, panel.size.height);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/clear-panel.ts","import { ISize } from '../interfaces/size';\r\nimport IPanel from '../models/panel';\r\n\r\nexport default function drawGrid(panel: IPanel, gridSize: ISize): void {\r\n    const tileSize: ISize = {\r\n        width: panel.size.width / gridSize.width,\r\n        height: panel.size.height / gridSize.height\r\n    };\r\n\r\n    const { ctx } = panel;\r\n    ctx.strokeStyle = '#efefef';\r\n\r\n    for (let x = 0; x < panel.size.width; x += tileSize.width) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, panel.size.height);\r\n        ctx.stroke();\r\n    }\r\n\r\n    for (let y = 0; y < panel.size.height; y += tileSize.height) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, y);\r\n        ctx.lineTo(panel.size.width, y);\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-grid.ts","import Matrix from '../interfaces/matrix';\r\nimport { ISize } from '../interfaces/size';\r\nimport { Color } from '../models/color';\r\nimport IPanel from '../models/panel';\r\nimport settings from '../settings';\r\n\r\nexport default function drawMatrix(panel: IPanel, matrix: Matrix): void {\r\n    const ctx = panel.ctx;\r\n\r\n    const tileSize: ISize = {\r\n        width: panel.size.width / matrix.length,\r\n        height: panel.size.height / matrix[0].length\r\n    };\r\n\r\n    matrix.forEach((col, x) => col.forEach((item, y) => {\r\n        if (typeof item === 'undefined' ||\r\n            !settings.drawEmptyTiles && !item) return;\r\n\r\n        ctx.fillStyle = item ? getColorCode(item) : '#8ED6FF';\r\n        ctx.fillRect(x * tileSize.width, y * tileSize.height,\r\n            tileSize.width, tileSize.height);\r\n    }));\r\n}\r\n\r\nfunction getColorCode(color: Color): string {\r\n    switch (color) {\r\n        case Color.Yellow:\r\n            return '#ffeb3b';\r\n        case Color.Blue:\r\n            return '#03a9f4';\r\n        case Color.Red:\r\n            return '#f44336';\r\n        case Color.Green:\r\n            return '#4caf50';\r\n        case Color.Orange:\r\n            return '#ff9800';\r\n        case Color.Pink:\r\n            return '#fbafbc';\r\n        case Color.Purple:\r\n            return '#9c27b0';\r\n        default:\r\n            return '#000';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-matrix.ts","const settings = {\r\n    drawEmptyTiles: false\r\n};\r\n\r\nexport default settings;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/settings.ts"],"sourceRoot":""}