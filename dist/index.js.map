{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap 719650ffe5cde318cccf","webpack:///./src/vendor/modernizr.min.js","webpack:///./src/services/player-score.ts","webpack:///./src/services/draw-grid.ts","webpack:///./src/models/color.ts","webpack:///./src/services/draw-matrix.ts","webpack:///./src/interfaces/point.ts","webpack:///./src/services/matrix-calculations.ts","webpack:///./src/services/ghost-matrix.ts","webpack:///./src/services/view-matrix.ts","webpack:///./src/services/key-handling.ts","webpack:///./src/services/random-shape.ts","webpack:///./src/services/game-over.ts","webpack:///./src/services/gameloop.ts","webpack:///./src/components/player-score.ts","webpack:///./src/settings.ts","webpack:///./src/components/panel.ts","webpack:///./src/models/board.ts","webpack:///./src/services/timer.ts","webpack:///./src/services/unique-array.ts","webpack:///./src/models/shape.ts","webpack:///./src/models/shapes/i.ts","webpack:///./src/models/shapes/j.ts","webpack:///./src/models/shapes/l.ts","webpack:///./src/models/shapes/o.ts","webpack:///./src/models/shapes/s.ts","webpack:///./src/models/shapes/t.ts","webpack:///./src/models/shapes/z.ts","webpack:///./src/models/player.ts","webpack:///./src/services/storage.ts","webpack:///./src/index.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","e","t","createElement","arguments","u","createElementNS","apply","a","body","fake","r","v","parseInt","id","appendChild","type","styleSheet","cssText","createTextNode","style","background","overflow","f","parentNode","removeChild","offsetHeight","_version","_config","classPrefix","enableClasses","enableJSClass","usePrefixes","_q","on","this","setTimeout","addTest","push","fn","options","addAsyncTest","Modernizr","navigator","localStorage","setItem","removeItem","sessionStorage","documentElement","nodeName","toLowerCase","getContext","split","_prefixes","testStyles","DocumentTouch","join","offsetTop","aliases","length","Boolean","window","document","__webpack_exports__","addScore","points","currentScore","triggerScoreChange","resetScore","onScoreChange","handler","triggerOnInit","subscribers","forEach","drawGrid","panel","gridSize","tileSize","width","size","height","ctx","strokeStyle","lineWidth","pixelRatio","x","beginPath","moveTo","lineTo","stroke","y","getColorCode","color","drawMatrix","matrix","col","item","src_settings","debug","drawEmptyTiles","fillStyle","emptyColor","fillRect","Math","ceil","clonePoint","point","pointEquals","b","createMatrix","result","Array","copyMatrix","reduce","slice","getMatrixSize","mergeMatrixes","parent","child","target","childMatrix","position","j","value","xyMatrix","rotateMatrix","reverse","matrixContains","matrixesColliding","getUnstuckPosition","isColliding","shape","maxOffset","pos","createGhost","board","pm","collides","map","ghostColor","getViewMatrix","playerMatrix","storage_player","blocks","ghost","storage_board","resetControls","keysDown","remove","handleKeyDown","keyCode","repeated","newPosition","triggered","hardDropped","rotate","unstuckPos","bind","sdPoints","softDrop","softDropPoints","softDropMax","nextPos","hdPoints","hardDrop","min","hardDropMax","newMatrix","activateLoop","storage_panel","draw","getRandomShape","Shape","shapes","floor","random","gameOver","clear","reset","update","newPos","place","linesCleared","clearFullLines","setLoopSpeed","seconds","currentSeconds","clearInterval","interval","setInterval","scoreEl","settings","gameSpeed","1","2","3","4","emptyTileColor","panel_Panel","Panel","canvas","getElementById","devicePixelRatio","getAttribute","offsetWidth","setAttribute","Error","clearRect","components_panel","board_Board","Board","_blocks","_this","fullRows","getFullLines","row","deleteRow","rowCount","incompleteRows","rows","_i","_a","splice","unshift","undefined","contains","models_board","Timer","repeat","_handler","_interval","_repeat","start","executeOnInit","stop","_handle","clearTimeout","timer","UniqueArray","_array","add","index","indexOf","unique_array","keyInterval","values","code","keyThresholdTimer","shape_Shape","models_shape","__extends","extendStatics","setPrototypeOf","__proto__","__","constructor","create","i_I","_super","I","shapes_i","j___extends","j_c","j_J","J","l___extends","l_c","l_L","L","o___extends","o_c","o_O","O","s___extends","s_c","s_S","S","t___extends","t_c","t_T","T","z___extends","z_c","z_Z","Z","z","player_Player","Player","startingPosition","_startingPos","_shape","player","boardSize","addEventListener","preventDefault","count","score","textContent","toLocaleString"],"mappings":"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","file":"index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports) {\n\n/*! modernizr 3.5.0 (Custom Build) | MIT *\r\n * https://modernizr.com/download/?-canvas-localstorage-serviceworker-sessionstorage-touchevents-webgl !*/\r\n!function(e,t,n){function o(e,t){return typeof e===t}function r(){var e,t,n,r,s,a,i;for(var d in l)if(l.hasOwnProperty(d)){if(e=[],t=l[d],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=o(t.fn,\"function\")?t.fn():t.fn,s=0;s<e.length;s++)a=e[s],i=a.split(\".\"),1===i.length?Modernizr[i[0]]=r:(!Modernizr[i[0]]||Modernizr[i[0]]instanceof Boolean||(Modernizr[i[0]]=new Boolean(Modernizr[i[0]])),Modernizr[i[0]][i[1]]=r),c.push((r?\"\":\"no-\")+i.join(\"-\"))}}function s(){return\"function\"!=typeof t.createElement?t.createElement(arguments[0]):u?t.createElementNS.call(t,\"http://www.w3.org/2000/svg\",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||(e=s(u?\"svg\":\"body\"),e.fake=!0),e}function i(e,n,o,r){var i,l,d,c,u=\"modernizr\",p=s(\"div\"),v=a();if(parseInt(o,10))for(;o--;)d=s(\"div\"),d.id=r?r[o]:u+(o+1),p.appendChild(d);return i=s(\"style\"),i.type=\"text/css\",i.id=\"s\"+u,(v.fake?v:p).appendChild(i),v.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),p.id=u,v.fake&&(v.style.background=\"\",v.style.overflow=\"hidden\",c=f.style.overflow,f.style.overflow=\"hidden\",f.appendChild(v)),l=n(p,e),v.fake?(v.parentNode.removeChild(v),f.style.overflow=c,f.offsetHeight):p.parentNode.removeChild(p),!!l}var l=[],d={_version:\"3.5.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){l.push({name:e,fn:t,options:n})},addAsyncTest:function(e){l.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr,Modernizr.addTest(\"serviceworker\",\"serviceWorker\"in navigator),Modernizr.addTest(\"localstorage\",function(){var e=\"modernizr\";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}),Modernizr.addTest(\"sessionstorage\",function(){var e=\"modernizr\";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}});var c=[],f=t.documentElement,u=\"svg\"===f.nodeName.toLowerCase();Modernizr.addTest(\"canvas\",function(){var e=s(\"canvas\");return!(!e.getContext||!e.getContext(\"2d\"))}),Modernizr.addTest(\"webgl\",function(){var t=s(\"canvas\"),n=\"probablySupportsContext\"in t?\"probablySupportsContext\":\"supportsContext\";return n in t?t[n](\"webgl\")||t[n](\"experimental-webgl\"):\"WebGLRenderingContext\"in e});var p=d._config.usePrefixes?\" -webkit- -moz- -o- -ms- \".split(\" \"):[\"\",\"\"];d._prefixes=p;var v=d.testStyles=i;Modernizr.addTest(\"touchevents\",function(){var n;if(\"ontouchstart\"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var o=[\"@media (\",p.join(\"touch-enabled),(\"),\"heartz\",\")\",\"{#modernizr{top:9px;position:absolute}}\"].join(\"\");v(o,function(e){n=9===e.offsetTop})}return n}),r(),delete d.addTest,delete d.addAsyncTest;for(var m=0;m<Modernizr._q.length;m++)Modernizr._q[m]();e.Modernizr=Modernizr}(window,document);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./src/services/player-score.ts\nvar currentScore = 0;\r\nfunction addScore(points) {\r\n    currentScore += points;\r\n    triggerScoreChange();\r\n}\r\nfunction resetScore() {\r\n    currentScore = 0;\r\n    triggerScoreChange();\r\n}\r\nvar subscribers = [];\r\nfunction onScoreChange(handler, triggerOnInit) {\r\n    if (triggerOnInit === void 0) { triggerOnInit = false; }\r\n    subscribers.push(handler);\r\n    if (triggerOnInit)\r\n        handler(currentScore);\r\n}\r\nfunction triggerScoreChange() {\r\n    subscribers.forEach(function (handler) { return handler(currentScore); });\r\n}\r\n\n// CONCATENATED MODULE: ./src/components/player-score.ts\n\r\nvar scoreEl;\r\nfunction loadPlayerScore() {\r\n    scoreEl = document.getElementById('player-score');\r\n    onScoreChange(function (score) {\r\n        scoreEl.textContent = score.toLocaleString();\r\n    }, true);\r\n}\r\n\n// CONCATENATED MODULE: ./src/settings.ts\nvar settings = {\r\n    gameSpeed: 0.4,\r\n    points: {\r\n        linesCleared: {\r\n            1: 40,\r\n            2: 100,\r\n            3: 300,\r\n            4: 1200\r\n        },\r\n        softDrop: 1,\r\n        hardDrop: 2,\r\n        softDropMax: 20,\r\n        hardDropMax: 40\r\n    },\r\n    debug: {\r\n        drawEmptyTiles: false,\r\n        emptyTileColor: '#f1f1f1'\r\n    }\r\n};\r\n/* harmony default export */ var src_settings = (settings);\r\n\n// CONCATENATED MODULE: ./src/services/draw-grid.ts\nfunction drawGrid(panel, gridSize) {\r\n    var tileSize = {\r\n        width: panel.size.width / gridSize.width,\r\n        height: panel.size.height / gridSize.height\r\n    };\r\n    var ctx = panel.ctx;\r\n    ctx.strokeStyle = '#efefef';\r\n    ctx.lineWidth = panel.pixelRatio;\r\n    for (var x = 0; x < panel.size.width; x += tileSize.width) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, panel.size.height);\r\n        ctx.stroke();\r\n    }\r\n    for (var y = 0; y < panel.size.height; y += tileSize.height) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, y);\r\n        ctx.lineTo(panel.size.width, y);\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/color.ts\nfunction getColorCode(color) {\r\n    switch (color) {\r\n        case 1:\r\n            return '#ffeb3b';\r\n        case 2:\r\n            return '#03a9f4';\r\n        case 3:\r\n            return '#f44336';\r\n        case 4:\r\n            return '#4caf50';\r\n        case 5:\r\n            return '#ff9800';\r\n        case 6:\r\n            return '#fbafbc';\r\n        case 7:\r\n            return '#9c27b0';\r\n        case 8:\r\n            return '#e0e0e0';\r\n        default:\r\n            return '#000';\r\n    }\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/draw-matrix.ts\n\r\n\r\nvar emptyColor = src_settings.debug.emptyTileColor;\r\nfunction drawMatrix(panel, matrix) {\r\n    var ctx = panel.ctx;\r\n    var tileSize = {\r\n        width: panel.size.width / matrix.length,\r\n        height: panel.size.height / matrix[0].length\r\n    };\r\n    matrix.forEach(function (col, x) { return col.forEach(function (item, y) {\r\n        if (typeof item === 'undefined' ||\r\n            !src_settings.debug.drawEmptyTiles && !item)\r\n            return;\r\n        ctx.fillStyle = item ? getColorCode(item) : emptyColor;\r\n        ctx.fillRect(x * tileSize.width | 0, y * tileSize.height | 0, Math.ceil(tileSize.width), Math.ceil(tileSize.height));\r\n    }); });\r\n}\r\n\n// CONCATENATED MODULE: ./src/interfaces/point.ts\nfunction clonePoint(point) {\r\n    return { x: point.x, y: point.y };\r\n}\r\nfunction pointEquals(a, b) {\r\n    return a.x === b.x && a.y === b.y;\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/matrix-calculations.ts\n\r\nfunction createMatrix(size) {\r\n    var result = [];\r\n    for (var col = 0; col < size.width; col++) {\r\n        result[col] = new Array(size.height);\r\n    }\r\n    return result;\r\n}\r\nfunction copyMatrix(matrix) {\r\n    return matrix.reduce(function (result, col, x) {\r\n        result[x] = col.slice();\r\n        return result;\r\n    }, []);\r\n}\r\nfunction getMatrixSize(matrix) {\r\n    return {\r\n        width: matrix.length,\r\n        height: matrix[0].length\r\n    };\r\n}\r\nfunction mergeMatrixes(parent, child, target) {\r\n    if (target === void 0) { target = copyMatrix(parent); }\r\n    var childMatrix = child.matrix, position = child.position;\r\n    var result = target;\r\n    for (var i = 0; i < childMatrix.length; i++) {\r\n        for (var j = 0; j < childMatrix[0].length; j++) {\r\n            var value = childMatrix[i][j];\r\n            if (typeof value === 'undefined')\r\n                continue;\r\n            var x = i + position.x;\r\n            var y = j + position.y;\r\n            if (x >= 0 && x < parent.length &&\r\n                y >= 0 && y < parent[0].length &&\r\n                (value || !result[x][y])) {\r\n                result[x][y] = value;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction xyMatrix(matrix) {\r\n    return rotateMatrix(matrix)\r\n        .reduce(function (result, col, x) {\r\n        result[x] = col.reverse();\r\n        return result;\r\n    }, []);\r\n}\r\nfunction rotateMatrix(matrix, reverse) {\r\n    if (reverse === void 0) { reverse = false; }\r\n    var l = matrix.length;\r\n    var result = createMatrix({ width: l, height: l });\r\n    for (var x = 0; x < l; x++) {\r\n        for (var y = 0; y < l; y++) {\r\n            result[x][y] = reverse\r\n                ? matrix[l - y - 1][x]\r\n                : matrix[y][l - x - 1];\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction matrixContains(parent, child) {\r\n    var childMatrix = child.matrix, position = child.position;\r\n    for (var i = 0; i < childMatrix.length; i++) {\r\n        var col = childMatrix[i];\r\n        for (var j = 0; j < col.length; j++) {\r\n            if (!col[j])\r\n                continue;\r\n            var x = i + position.x;\r\n            var y = j + position.y;\r\n            if (x < 0 || x >= parent.length ||\r\n                y < 0 || y >= parent[0].length) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction matrixesColliding(parent, child) {\r\n    var childMatrix = child.matrix, position = child.position;\r\n    for (var x = 0; x < childMatrix.length; x++) {\r\n        for (var y = 0; y < childMatrix[0].length; y++) {\r\n            if (!childMatrix[x][y])\r\n                continue;\r\n            var col = parent[x + position.x];\r\n            if (!col)\r\n                continue;\r\n            if (col[y + position.y]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction getUnstuckPosition(matrix, isColliding) {\r\n    var shape = matrix.matrix, position = matrix.position;\r\n    var maxOffset = Math.ceil(shape.length / 2);\r\n    for (var i = 1; i <= maxOffset; i++) {\r\n        var pos = clonePoint(position);\r\n        pos.y += i;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        }))\r\n            return pos;\r\n        pos.y -= i * 2;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        }))\r\n            return pos;\r\n        pos.y += i;\r\n        pos.x += i;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        }))\r\n            return pos;\r\n        pos.x -= i * 2;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        }))\r\n            return pos;\r\n        pos.x += i;\r\n    }\r\n    return null;\r\n}\r\n\n// CONCATENATED MODULE: ./src/components/panel.ts\n\r\n\r\n\r\nvar panel_Panel = (function () {\r\n    function Panel(id) {\r\n        var canvas = document.getElementById(id);\r\n        this.pixelRatio = devicePixelRatio || 1;\r\n        this.size = {\r\n            width: parseInt(canvas.getAttribute('width'), 10) * this.pixelRatio,\r\n            height: parseInt(canvas.getAttribute('height'), 10) * this.pixelRatio\r\n        };\r\n        if (this.size.width !== canvas.offsetWidth) {\r\n            canvas.setAttribute('width', \"\" + this.size.width);\r\n        }\r\n        if (this.size.height !== canvas.offsetHeight) {\r\n            canvas.setAttribute('height', \"\" + this.size.height);\r\n        }\r\n        var ctx = canvas.getContext('2d');\r\n        if (!ctx)\r\n            throw new Error('Context not found!');\r\n        this.ctx = ctx;\r\n    }\r\n    Panel.prototype.draw = function (matrix) {\r\n        this.clear();\r\n        drawGrid(this, getMatrixSize(matrix));\r\n        drawMatrix(this, matrix);\r\n    };\r\n    Panel.prototype.clear = function () {\r\n        this.ctx.clearRect(0, 0, this.size.width, this.size.height);\r\n    };\r\n    return Panel;\r\n}());\r\n/* harmony default export */ var components_panel = (panel_Panel);\r\n\n// CONCATENATED MODULE: ./src/models/board.ts\n\r\nvar board_Board = (function () {\r\n    function Board(size) {\r\n        this.size = size;\r\n        this.clear();\r\n    }\r\n    Object.defineProperty(Board.prototype, \"blocks\", {\r\n        get: function () { return this._blocks; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Board.prototype.place = function (shape, position) {\r\n        mergeMatrixes(this.blocks, {\r\n            matrix: shape.blocks,\r\n            position: position\r\n        }, this.blocks);\r\n    };\r\n    Board.prototype.clearFullLines = function () {\r\n        var _this = this;\r\n        var fullRows = this.getFullLines();\r\n        fullRows.forEach(function (row) { return _this.deleteRow(row); });\r\n        return fullRows.length;\r\n    };\r\n    Board.prototype.getFullLines = function () {\r\n        var rowCount = this._blocks[0].length;\r\n        var incompleteRows = new Array(rowCount - 1);\r\n        rows: for (var y = 0; y < rowCount; y++) {\r\n            for (var _i = 0, _a = this._blocks; _i < _a.length; _i++) {\r\n                var col = _a[_i];\r\n                if (!col[y]) {\r\n                    incompleteRows[y] = true;\r\n                    continue rows;\r\n                }\r\n            }\r\n        }\r\n        var result = [];\r\n        for (var row = 0; row < rowCount; row++) {\r\n            if (!incompleteRows[row])\r\n                result.push(row);\r\n        }\r\n        return result;\r\n    };\r\n    Board.prototype.deleteRow = function (row) {\r\n        this._blocks.forEach(function (col) {\r\n            col.splice(row, 1);\r\n            col.unshift(undefined);\r\n        });\r\n    };\r\n    Board.prototype.clear = function () {\r\n        this._blocks = [];\r\n        for (var x = 0; x < this.size.width; x++) {\r\n            this._blocks[x] = new Array(this.size.height);\r\n        }\r\n    };\r\n    Board.prototype.contains = function (matrix) {\r\n        return matrixContains(this._blocks, matrix);\r\n    };\r\n    Board.prototype.collides = function (matrix) {\r\n        return !this.contains(matrix)\r\n            || matrixesColliding(this.blocks, matrix);\r\n    };\r\n    return Board;\r\n}());\r\n/* harmony default export */ var models_board = (board_Board);\r\n\n// CONCATENATED MODULE: ./src/services/timer.ts\nvar Timer = (function () {\r\n    function Timer(handler, interval, repeat) {\r\n        if (repeat === void 0) { repeat = true; }\r\n        this._handler = handler;\r\n        this._interval = interval;\r\n        this._repeat = repeat;\r\n    }\r\n    Timer.prototype.start = function (executeOnInit) {\r\n        if (executeOnInit === void 0) { executeOnInit = false; }\r\n        if (executeOnInit) {\r\n            this._handler();\r\n            if (!this._repeat)\r\n                return;\r\n        }\r\n        this.stop();\r\n        this._handle = (this._repeat\r\n            ? setInterval\r\n            : setTimeout)(this._handler, this._interval);\r\n    };\r\n    Timer.prototype.stop = function () {\r\n        this._handle = (this._repeat\r\n            ? clearInterval\r\n            : clearTimeout)(this._handle);\r\n    };\r\n    return Timer;\r\n}());\r\n/* harmony default export */ var timer = (Timer);\r\n\n// CONCATENATED MODULE: ./src/services/unique-array.ts\nvar UniqueArray = (function () {\r\n    function UniqueArray() {\r\n        this._array = [];\r\n    }\r\n    Object.defineProperty(UniqueArray.prototype, \"count\", {\r\n        get: function () { return this._array.length; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(UniqueArray.prototype, \"values\", {\r\n        get: function () { return this._array; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    UniqueArray.prototype.add = function (value) {\r\n        if (!this.contains(value)) {\r\n            this._array.push(value);\r\n        }\r\n    };\r\n    UniqueArray.prototype.remove = function (value) {\r\n        var index = this._array.indexOf(value);\r\n        if (index >= 0) {\r\n            this._array.splice(index, 1);\r\n        }\r\n    };\r\n    UniqueArray.prototype.contains = function (value) {\r\n        return this._array.indexOf(value) >= 0;\r\n    };\r\n    return UniqueArray;\r\n}());\r\n/* harmony default export */ var unique_array = (UniqueArray);\r\n\n// CONCATENATED MODULE: ./src/services/ghost-matrix.ts\n\r\nvar ghostColor = 8;\r\nfunction createGhost(board, pm) {\r\n    var matrix = pm.matrix;\r\n    var position = clonePoint(pm.position);\r\n    var y = position.y;\r\n    do {\r\n        y++;\r\n    } while (!board.collides({\r\n        matrix: matrix,\r\n        position: { x: position.x, y: y }\r\n    }));\r\n    position.y = y - 1;\r\n    var ghost = matrix.map(function (col) { return col.map(function (x) {\r\n        if (x)\r\n            return ghostColor;\r\n    }); });\r\n    return { matrix: ghost, position: position };\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/view-matrix.ts\n\r\n\r\n\r\nfunction getViewMatrix() {\r\n    var playerMatrix = {\r\n        matrix: storage_player.shape.blocks,\r\n        position: storage_player.position\r\n    };\r\n    var ghost = createGhost(storage_board, playerMatrix);\r\n    return mergeMatrixes(mergeMatrixes(storage_board.blocks, ghost), playerMatrix);\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/key-handling.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar keysDown = new unique_array();\r\nvar keyInterval = new timer(function () {\r\n    keysDown.values.forEach(function (code) {\r\n        handleKeyDown(code, true);\r\n    });\r\n}, 90);\r\nvar keyThresholdTimer = new timer(function () {\r\n    keyInterval.start();\r\n}, 200, false);\r\nfunction handleKeys() {\r\n    document.addEventListener('keydown', function (e) {\r\n        if (e.repeat)\r\n            return;\r\n        var keyCode = e.code;\r\n        if (handleKeyDown(keyCode, false)) {\r\n            e.preventDefault();\r\n            keysDown.add(keyCode);\r\n            if (keyCode === 'ArrowLeft' || keyCode === 'ArrowRight') {\r\n                keyInterval.stop();\r\n                keyThresholdTimer.start();\r\n            }\r\n            else\r\n                keyInterval.start();\r\n        }\r\n    });\r\n    document.addEventListener('keyup', function (e) {\r\n        if (keysDown.contains(e.code)) {\r\n            keysDown.remove(e.code);\r\n            if (keysDown.count === 0) {\r\n                keyThresholdTimer.stop();\r\n                keyInterval.stop();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction resetControls() {\r\n    keysDown.remove('ArrowDown');\r\n}\r\nfunction handleKeyDown(keyCode, repeated) {\r\n    var newPosition = {\r\n        x: storage_player.position.x,\r\n        y: storage_player.position.y\r\n    };\r\n    var triggered = true;\r\n    var hardDropped = false;\r\n    switch (keyCode) {\r\n        case 'ArrowUp':\r\n            if (repeated)\r\n                return true;\r\n            storage_player.shape.rotate();\r\n            var playerMatrix = {\r\n                matrix: storage_player.shape.blocks,\r\n                position: newPosition\r\n            };\r\n            if (storage_board.collides(playerMatrix)) {\r\n                var unstuckPos = getUnstuckPosition(playerMatrix, storage_board.collides.bind(storage_board));\r\n                if (!unstuckPos) {\r\n                    storage_player.shape.rotate(true);\r\n                }\r\n                else {\r\n                    newPosition = unstuckPos;\r\n                }\r\n            }\r\n            break;\r\n        case 'ArrowRight':\r\n            newPosition.x++;\r\n            break;\r\n        case 'ArrowDown':\r\n            newPosition.y++;\r\n            var sdPoints = src_settings.points.softDrop;\r\n            storage_player.softDropPoints += sdPoints;\r\n            if (storage_player.softDropPoints < src_settings.points.softDropMax) {\r\n                addScore(sdPoints);\r\n            }\r\n            break;\r\n        case 'ArrowLeft':\r\n            newPosition.x--;\r\n            break;\r\n        case 'Space':\r\n            if (repeated)\r\n                return true;\r\n            var nextPos = newPosition;\r\n            var hdPoints = 0;\r\n            do {\r\n                nextPos = { x: nextPos.x, y: nextPos.y + 1 };\r\n                hdPoints += src_settings.points.hardDrop;\r\n            } while (!storage_board.collides({\r\n                matrix: storage_player.shape.blocks,\r\n                position: nextPos\r\n            }));\r\n            newPosition = { x: nextPos.x, y: nextPos.y - 1 };\r\n            addScore(Math.min(hdPoints - src_settings.points.hardDrop, src_settings.points.hardDropMax));\r\n            hardDropped = true;\r\n            break;\r\n        default:\r\n            triggered = false;\r\n            break;\r\n    }\r\n    var posChanged = !pointEquals(storage_player.position, newPosition);\r\n    if (posChanged) {\r\n        var newMatrix = {\r\n            matrix: storage_player.shape.blocks,\r\n            position: newPosition\r\n        };\r\n        if (!storage_board.collides(newMatrix)) {\r\n            storage_player.position = newPosition;\r\n        }\r\n        if (matrixesColliding(storage_board.blocks, newMatrix) || hardDropped) {\r\n            activateLoop();\r\n        }\r\n    }\r\n    if (triggered) {\r\n        storage_panel.draw(getViewMatrix());\r\n    }\r\n    return triggered;\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/shape.ts\n\r\nvar shape_Shape = (function () {\r\n    function Shape(blocks) {\r\n        this._blocks = blocks;\r\n    }\r\n    Object.defineProperty(Shape.prototype, \"blocks\", {\r\n        get: function () {\r\n            return this._blocks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Shape.prototype.rotate = function (reverse) {\r\n        if (reverse === void 0) { reverse = false; }\r\n        this._blocks = rotateMatrix(this._blocks, reverse);\r\n    };\r\n    return Shape;\r\n}());\r\n/* harmony default export */ var models_shape = (shape_Shape);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/i.ts\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar c = 2;\r\nvar i_I = (function (_super) {\r\n    __extends(I, _super);\r\n    function I() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0]\r\n        ])) || this;\r\n    }\r\n    return I;\r\n}(models_shape));\r\n/* harmony default export */ var shapes_i = (i_I);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/j.ts\nvar j___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar j_c = 6;\r\nvar j_J = (function (_super) {\r\n    j___extends(J, _super);\r\n    function J() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, j_c, 0],\r\n            [0, j_c, 0],\r\n            [j_c, j_c, 0]\r\n        ])) || this;\r\n    }\r\n    return J;\r\n}(models_shape));\r\n/* harmony default export */ var j = (j_J);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/l.ts\nvar l___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar l_c = 5;\r\nvar l_L = (function (_super) {\r\n    l___extends(L, _super);\r\n    function L() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, l_c, 0],\r\n            [0, l_c, 0],\r\n            [0, l_c, l_c]\r\n        ])) || this;\r\n    }\r\n    return L;\r\n}(models_shape));\r\n/* harmony default export */ var l = (l_L);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/o.ts\nvar o___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar o_c = 1;\r\nvar o_O = (function (_super) {\r\n    o___extends(O, _super);\r\n    function O() {\r\n        return _super.call(this, xyMatrix([\r\n            [o_c, o_c],\r\n            [o_c, o_c]\r\n        ])) || this;\r\n    }\r\n    return O;\r\n}(models_shape));\r\n/* harmony default export */ var o = (o_O);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/s.ts\nvar s___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar s_c = 3;\r\nvar s_S = (function (_super) {\r\n    s___extends(S, _super);\r\n    function S() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, s_c, s_c],\r\n            [s_c, s_c, 0],\r\n            [0, 0, 0]\r\n        ])) || this;\r\n    }\r\n    return S;\r\n}(models_shape));\r\n/* harmony default export */ var s = (s_S);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/t.ts\nvar t___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar t_c = 7;\r\nvar t_T = (function (_super) {\r\n    t___extends(T, _super);\r\n    function T() {\r\n        return _super.call(this, xyMatrix([\r\n            [t_c, t_c, t_c],\r\n            [0, t_c, 0],\r\n            [0, 0, 0]\r\n        ])) || this;\r\n    }\r\n    return T;\r\n}(models_shape));\r\n/* harmony default export */ var t = (t_T);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/z.ts\nvar z___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar z_c = 4;\r\nvar z_Z = (function (_super) {\r\n    z___extends(Z, _super);\r\n    function Z() {\r\n        return _super.call(this, xyMatrix([\r\n            [z_c, z_c, 0],\r\n            [0, z_c, z_c],\r\n            [0, 0, 0]\r\n        ])) || this;\r\n    }\r\n    return Z;\r\n}(models_shape));\r\n/* harmony default export */ var z = (z_Z);\r\n\n// CONCATENATED MODULE: ./src/services/random-shape.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar shapes = [shapes_i, j, l, o, s, t, z];\r\nfunction getRandomShape() {\r\n    var Shape = shapes[Math.floor(Math.random() * shapes.length)];\r\n    return new Shape();\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/player.ts\n\r\n\r\n\r\nvar player_Player = (function () {\r\n    function Player(startingPosition) {\r\n        this.softDropPoints = 0;\r\n        this._startingPos = startingPosition;\r\n        this.reset();\r\n    }\r\n    Object.defineProperty(Player.prototype, \"shape\", {\r\n        get: function () {\r\n            return this._shape;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Player.prototype.reset = function () {\r\n        this.position = clonePoint(this._startingPos);\r\n        this._shape = getRandomShape();\r\n        resetControls();\r\n    };\r\n    return Player;\r\n}());\r\n/* harmony default export */ var player = (player_Player);\r\n\n// CONCATENATED MODULE: ./src/services/storage.ts\n\r\n\r\n\r\nvar boardSize = {\r\n    width: 10,\r\n    height: 20\r\n};\r\nvar storage_player = new player({ x: boardSize.width / 2 - 1, y: 0 });\r\nvar storage_panel = new components_panel('game');\r\nvar storage_board = new models_board(boardSize);\r\n\n// CONCATENATED MODULE: ./src/services/game-over.ts\n\r\n\r\nfunction gameOver() {\r\n    storage_board.clear();\r\n    storage_player.reset();\r\n    resetScore();\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/gameloop.ts\n\r\n\r\n\r\n\r\n\r\nfunction update() {\r\n    var newPos = {\r\n        x: storage_player.position.x,\r\n        y: storage_player.position.y + 1\r\n    };\r\n    if (!storage_board.collides({ matrix: storage_player.shape.blocks, position: newPos })) {\r\n        storage_player.position = newPos;\r\n    }\r\n    else {\r\n        storage_board.place(storage_player.shape, storage_player.position);\r\n        var linesCleared = storage_board.clearFullLines();\r\n        if (linesCleared) {\r\n            var scoring = src_settings.points.linesCleared;\r\n            addScore(scoring[linesCleared]);\r\n        }\r\n        storage_player.reset();\r\n        storage_player.softDropPoints = 0;\r\n        if (storage_board.collides({\r\n            matrix: storage_player.shape.blocks,\r\n            position: storage_player.position\r\n        })) {\r\n            gameOver();\r\n        }\r\n    }\r\n    storage_panel.draw(getViewMatrix());\r\n}\r\nvar interval;\r\nvar currentSeconds;\r\nfunction setLoopSpeed(seconds) {\r\n    currentSeconds = seconds;\r\n    window.clearInterval(interval);\r\n    update();\r\n    interval = window.setInterval(update, seconds * 1000);\r\n}\r\nfunction activateLoop() {\r\n    setLoopSpeed(currentSeconds);\r\n}\r\n\n// EXTERNAL MODULE: ./src/vendor/modernizr.min.js\nvar modernizr_min = __webpack_require__(1);\nvar modernizr_min_default = /*#__PURE__*/__webpack_require__.n(modernizr_min);\n\n// CONCATENATED MODULE: ./src/index.ts\n\r\n\r\n\r\n\r\n\r\nsetLoopSpeed(src_settings.gameSpeed);\r\nhandleKeys();\r\nloadPlayerScore();\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 719650ffe5cde318cccf","/*! modernizr 3.5.0 (Custom Build) | MIT *\r\n * https://modernizr.com/download/?-canvas-localstorage-serviceworker-sessionstorage-touchevents-webgl !*/\r\n!function(e,t,n){function o(e,t){return typeof e===t}function r(){var e,t,n,r,s,a,i;for(var d in l)if(l.hasOwnProperty(d)){if(e=[],t=l[d],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=o(t.fn,\"function\")?t.fn():t.fn,s=0;s<e.length;s++)a=e[s],i=a.split(\".\"),1===i.length?Modernizr[i[0]]=r:(!Modernizr[i[0]]||Modernizr[i[0]]instanceof Boolean||(Modernizr[i[0]]=new Boolean(Modernizr[i[0]])),Modernizr[i[0]][i[1]]=r),c.push((r?\"\":\"no-\")+i.join(\"-\"))}}function s(){return\"function\"!=typeof t.createElement?t.createElement(arguments[0]):u?t.createElementNS.call(t,\"http://www.w3.org/2000/svg\",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||(e=s(u?\"svg\":\"body\"),e.fake=!0),e}function i(e,n,o,r){var i,l,d,c,u=\"modernizr\",p=s(\"div\"),v=a();if(parseInt(o,10))for(;o--;)d=s(\"div\"),d.id=r?r[o]:u+(o+1),p.appendChild(d);return i=s(\"style\"),i.type=\"text/css\",i.id=\"s\"+u,(v.fake?v:p).appendChild(i),v.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),p.id=u,v.fake&&(v.style.background=\"\",v.style.overflow=\"hidden\",c=f.style.overflow,f.style.overflow=\"hidden\",f.appendChild(v)),l=n(p,e),v.fake?(v.parentNode.removeChild(v),f.style.overflow=c,f.offsetHeight):p.parentNode.removeChild(p),!!l}var l=[],d={_version:\"3.5.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){l.push({name:e,fn:t,options:n})},addAsyncTest:function(e){l.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr,Modernizr.addTest(\"serviceworker\",\"serviceWorker\"in navigator),Modernizr.addTest(\"localstorage\",function(){var e=\"modernizr\";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}),Modernizr.addTest(\"sessionstorage\",function(){var e=\"modernizr\";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}});var c=[],f=t.documentElement,u=\"svg\"===f.nodeName.toLowerCase();Modernizr.addTest(\"canvas\",function(){var e=s(\"canvas\");return!(!e.getContext||!e.getContext(\"2d\"))}),Modernizr.addTest(\"webgl\",function(){var t=s(\"canvas\"),n=\"probablySupportsContext\"in t?\"probablySupportsContext\":\"supportsContext\";return n in t?t[n](\"webgl\")||t[n](\"experimental-webgl\"):\"WebGLRenderingContext\"in e});var p=d._config.usePrefixes?\" -webkit- -moz- -o- -ms- \".split(\" \"):[\"\",\"\"];d._prefixes=p;var v=d.testStyles=i;Modernizr.addTest(\"touchevents\",function(){var n;if(\"ontouchstart\"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var o=[\"@media (\",p.join(\"touch-enabled),(\"),\"heartz\",\")\",\"{#modernizr{top:9px;position:absolute}}\"].join(\"\");v(o,function(e){n=9===e.offsetTop})}return n}),r(),delete d.addTest,delete d.addAsyncTest;for(var m=0;m<Modernizr._q.length;m++)Modernizr._q[m]();e.Modernizr=Modernizr}(window,document);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/vendor/modernizr.min.js\n// module id = 1\n// module chunks = 0","let currentScore = 0;\r\n\r\nexport function addScore(points: number): void {\r\n    currentScore += points;\r\n    triggerScoreChange();\r\n}\r\n\r\nexport function resetScore(): void {\r\n    currentScore = 0;\r\n    triggerScoreChange();\r\n}\r\n\r\nconst subscribers: Array<(score: number) => void> = [];\r\nexport function onScoreChange(handler: (score: number) => void, triggerOnInit = false): void {\r\n    subscribers.push(handler);\r\n    if (triggerOnInit) handler(currentScore);\r\n}\r\n\r\nfunction triggerScoreChange(): void {\r\n    subscribers.forEach(handler => handler(currentScore));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/player-score.ts","import Panel from '../components/panel';\r\nimport { ISize } from '../interfaces/size';\r\n\r\nexport default function drawGrid(panel: Panel, gridSize: ISize): void {\r\n    const tileSize: ISize = {\r\n        width: panel.size.width / gridSize.width,\r\n        height: panel.size.height / gridSize.height\r\n    };\r\n\r\n    const { ctx } = panel;\r\n    ctx.strokeStyle = '#efefef';\r\n    ctx.lineWidth = panel.pixelRatio;\r\n\r\n    for (let x = 0; x < panel.size.width; x += tileSize.width) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, panel.size.height);\r\n        ctx.stroke();\r\n    }\r\n\r\n    for (let y = 0; y < panel.size.height; y += tileSize.height) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, y);\r\n        ctx.lineTo(panel.size.width, y);\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-grid.ts","export const enum Color {\r\n    Yellow = 1,\r\n    Blue = 2,\r\n    Red = 3,\r\n    Green = 4,\r\n    Orange = 5,\r\n    Pink = 6,\r\n    Purple = 7,\r\n    Grey = 8\r\n}\r\n\r\nexport function getColorCode(color: Color): string {\r\n    switch (color) {\r\n        case Color.Yellow:\r\n            return '#ffeb3b';\r\n        case Color.Blue:\r\n            return '#03a9f4';\r\n        case Color.Red:\r\n            return '#f44336';\r\n        case Color.Green:\r\n            return '#4caf50';\r\n        case Color.Orange:\r\n            return '#ff9800';\r\n        case Color.Pink:\r\n            return '#fbafbc';\r\n        case Color.Purple:\r\n            return '#9c27b0';\r\n        case Color.Grey:\r\n            return '#e0e0e0';\r\n        default:\r\n            return '#000';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/color.ts","import Panel from '../components/panel';\r\nimport Matrix from '../interfaces/matrix';\r\nimport { ISize } from '../interfaces/size';\r\nimport { getColorCode } from '../models/color';\r\nimport settings from '../settings';\r\n\r\nconst emptyColor = settings.debug.emptyTileColor;\r\n\r\nexport default function drawMatrix(panel: Panel, matrix: Matrix): void {\r\n    const ctx = panel.ctx;\r\n\r\n    const tileSize: ISize = {\r\n        width: panel.size.width / matrix.length,\r\n        height: panel.size.height / matrix[0].length\r\n    };\r\n\r\n    matrix.forEach((col, x) => col.forEach((item, y) => {\r\n        if (typeof item === 'undefined' ||\r\n            !settings.debug.drawEmptyTiles && !item) return;\r\n\r\n        ctx.fillStyle = item ? getColorCode(item) : emptyColor;\r\n        ctx.fillRect(\r\n            x * tileSize.width | 0,\r\n            y * tileSize.height | 0,\r\n            Math.ceil(tileSize.width),\r\n            Math.ceil(tileSize.height));\r\n    }));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-matrix.ts","export default interface IPoint {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport function clonePoint(point: IPoint): IPoint {\r\n    return { x: point.x, y: point.y };\r\n}\r\n\r\nexport function pointEquals(a: IPoint, b: IPoint): boolean {\r\n    return a.x === b.x && a.y === b.y;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/interfaces/point.ts","import Matrix from '../interfaces/matrix';\r\nimport { clonePoint, default as IPoint } from '../interfaces/point';\r\nimport IPositionedMatrix from '../interfaces/positioned-matrix';\r\nimport { ISize } from '../interfaces/size';\r\n\r\nexport function createMatrix(size: ISize): Matrix {\r\n    const result: Matrix = [];\r\n    for (let col = 0; col < size.width; col++) {\r\n        result[col] = new Array(size.height);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function copyMatrix(matrix: Matrix): Matrix {\r\n    return matrix.reduce<Matrix>((result, col, x) => {\r\n        result[x] = col.slice();\r\n        return result;\r\n    }, []);\r\n}\r\n\r\nexport function getMatrixSize(matrix: Matrix): ISize {\r\n    return {\r\n        width: matrix.length,\r\n        height: matrix[0].length\r\n    };\r\n}\r\n\r\n/**\r\n * Merges parent and child matrixes into the target matrix\r\n */\r\nexport function mergeMatrixes(parent: Matrix, child: IPositionedMatrix, target = copyMatrix(parent)): Matrix {\r\n    const { matrix: childMatrix, position } = child;\r\n    const result = target;\r\n\r\n    for (let i = 0; i < childMatrix.length; i++) {\r\n        for (let j = 0; j < childMatrix[0].length; j++) {\r\n            const value = childMatrix[i][j];\r\n            if (typeof value === 'undefined') continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x >= 0 && x < parent.length &&\r\n                y >= 0 && y < parent[0].length &&\r\n                (value || !result[x][y])) {\r\n                result[x][y] = value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Transforms matrix to be used in the coordinate system\r\n */\r\nexport function xyMatrix(matrix: Matrix): Matrix {\r\n    return rotateMatrix(matrix)\r\n        .reduce<Matrix>((result, col, x) => {\r\n            // Flip columns\r\n            result[x] = col.reverse();\r\n            return result;\r\n        }, []);\r\n}\r\n\r\n/**\r\n * Rotate a square 2D matrix\r\n */\r\nexport function rotateMatrix(matrix: Matrix, reverse = false): Matrix {\r\n    const l = matrix.length;\r\n    const result = createMatrix({ width: l, height: l });\r\n\r\n    // Apply rotation\r\n    for (let x = 0; x < l; x++) {\r\n        for (let y = 0; y < l; y++) {\r\n            result[x][y] = reverse\r\n                ? matrix[l - y - 1][x]\r\n                : matrix[y][l - x - 1];\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Checks if child is not outside parent matrix\r\n */\r\nexport function matrixContains(parent: Matrix, child: IPositionedMatrix): boolean {\r\n    const { matrix: childMatrix, position } = child;\r\n\r\n    for (let i = 0; i < childMatrix.length; i++) {\r\n        const col = childMatrix[i];\r\n        for (let j = 0; j < col.length; j++) {\r\n            if (!col[j]) continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x < 0 || x >= parent.length ||\r\n                y < 0 || y >= parent[0].length) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function matrixesColliding(parent: Matrix, child: IPositionedMatrix): boolean {\r\n    const { matrix: childMatrix, position } = child;\r\n\r\n    for (let x = 0; x < childMatrix.length; x++) {\r\n        for (let y = 0; y < childMatrix[0].length; y++) {\r\n            if (!childMatrix[x][y]) continue;\r\n\r\n            const col = parent[x + position.x];\r\n            if (!col) continue;\r\n\r\n            if (col[y + position.y]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Tries to move matrix to a non-colliding position\r\n */\r\nexport function getUnstuckPosition(matrix: IPositionedMatrix,\r\n    isColliding: (matrix: IPositionedMatrix) => boolean): IPoint | null {\r\n\r\n    const { matrix: shape, position } = matrix;\r\n\r\n    const maxOffset = Math.ceil(shape.length / 2);\r\n    for (let i = 1; i <= maxOffset; i++) {\r\n        const pos = clonePoint(position);\r\n\r\n        // Try down\r\n        pos.y += i;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        })) return pos;\r\n\r\n        // Try up\r\n        pos.y -= i * 2;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        })) return pos;\r\n        pos.y += i;\r\n\r\n        // Try right\r\n        pos.x += i;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        })) return pos;\r\n\r\n        // Try left\r\n        pos.x -= i * 2;\r\n        if (!isColliding({\r\n            matrix: shape,\r\n            position: pos\r\n        })) return pos;\r\n        pos.x += i;\r\n    }\r\n\r\n    return null;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/matrix-calculations.ts","import Matrix from '../interfaces/matrix';\r\nimport { clonePoint } from '../interfaces/point';\r\nimport IPositionedMatrix from '../interfaces/positioned-matrix';\r\nimport Board from '../models/board';\r\nimport { Color } from '../models/color';\r\n\r\nconst ghostColor = Color.Grey;\r\n\r\nexport default function createGhost(board: Board, pm: IPositionedMatrix): IPositionedMatrix {\r\n    const matrix = pm.matrix;\r\n    const position = clonePoint(pm.position);\r\n\r\n    // Calculate y position\r\n    let y = position.y;\r\n    do {\r\n        y++;\r\n    } while (!board.collides({\r\n        matrix,\r\n        position: { x: position.x, y }\r\n    }));\r\n    position.y = y - 1;\r\n\r\n    // Copy matrix with new color\r\n    const ghost: Matrix = matrix.map(col => col.map(x => {\r\n        if (x) return ghostColor;\r\n    }));\r\n\r\n    return { matrix: ghost, position };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/ghost-matrix.ts","import Matrix from '../interfaces/matrix';\r\nimport createGhost from './ghost-matrix';\r\nimport { mergeMatrixes } from './matrix-calculations';\r\nimport { board, player } from './storage';\r\n\r\nexport default function getViewMatrix(): Matrix {\r\n\r\n    const playerMatrix = {\r\n        matrix: player.shape.blocks,\r\n        position: player.position\r\n    };\r\n\r\n    const ghost = createGhost(board, playerMatrix);\r\n\r\n    return mergeMatrixes(\r\n        mergeMatrixes(board.blocks, ghost),\r\n        playerMatrix\r\n    );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/view-matrix.ts","import { pointEquals } from '../interfaces/point';\r\nimport settings from '../settings';\r\nimport { activateLoop } from './gameloop';\r\nimport { getUnstuckPosition, matrixesColliding } from './matrix-calculations';\r\nimport { addScore } from './player-score';\r\nimport { board, panel, player } from './storage';\r\nimport Timer from './timer';\r\nimport UniqueArray from './unique-array';\r\nimport getViewMatrix from './view-matrix';\r\n\r\nconst keysDown = new UniqueArray<string>();\r\n\r\nconst keyInterval = new Timer(() => {\r\n    keysDown.values.forEach(code => {\r\n        handleKeyDown(code, true);\r\n    });\r\n}, 90);\r\n\r\nconst keyThresholdTimer = new Timer(() => {\r\n    keyInterval.start();\r\n}, 200, false);\r\n\r\nexport default function handleKeys(): void {\r\n    document.addEventListener('keydown', e => {\r\n        if (e.repeat) return;\r\n\r\n        const keyCode = e.code;\r\n\r\n        if (handleKeyDown(keyCode, false)) {\r\n            e.preventDefault();\r\n\r\n            keysDown.add(keyCode);\r\n\r\n            if (keyCode === 'ArrowLeft' || keyCode === 'ArrowRight') {\r\n                // Make it easier to move one tile\r\n                keyInterval.stop();\r\n                keyThresholdTimer.start();\r\n            } else keyInterval.start();\r\n        }\r\n    });\r\n\r\n    document.addEventListener('keyup', e => {\r\n        if (keysDown.contains(e.code)) {\r\n            keysDown.remove(e.code);\r\n\r\n            if (keysDown.count === 0) {\r\n                keyThresholdTimer.stop();\r\n                keyInterval.stop();\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function resetControls(): void {\r\n    keysDown.remove('ArrowDown');\r\n}\r\n\r\nfunction handleKeyDown(keyCode: string, repeated: boolean): boolean {\r\n    let newPosition = {\r\n        x: player.position.x,\r\n        y: player.position.y\r\n    };\r\n\r\n    let triggered = true;\r\n    let hardDropped = false;\r\n\r\n    switch (keyCode) {\r\n        case 'ArrowUp':\r\n            // Rotate clockwise\r\n            if (repeated) return true;\r\n            player.shape.rotate();\r\n\r\n            const playerMatrix = {\r\n                matrix: player.shape.blocks,\r\n                position: newPosition\r\n            };\r\n\r\n            if (board.collides(playerMatrix)) {\r\n                // Colliding with other blocks, try to reposition\r\n                const unstuckPos = getUnstuckPosition(playerMatrix, board.collides.bind(board));\r\n\r\n                if (!unstuckPos) {\r\n                    // Cannot unstuck, revert!\r\n                    player.shape.rotate(true);\r\n                } else {\r\n                    // Repositioned\r\n                    newPosition = unstuckPos;\r\n                }\r\n            }\r\n\r\n            break;\r\n        case 'ArrowRight':\r\n            // Move right\r\n            newPosition.x++;\r\n            break;\r\n        case 'ArrowDown':\r\n            // Soft drop\r\n            newPosition.y++;\r\n\r\n            // Add points to score\r\n            const sdPoints = settings.points.softDrop;\r\n            player.softDropPoints += sdPoints;\r\n            if (player.softDropPoints < settings.points.softDropMax) {\r\n                addScore(sdPoints);\r\n            }\r\n\r\n            break;\r\n        case 'ArrowLeft':\r\n            // Move left\r\n            newPosition.x--;\r\n            break;\r\n        case 'Space':\r\n            // Hard drop\r\n            if (repeated) return true;\r\n\r\n            let nextPos = newPosition;\r\n            let hdPoints = 0;\r\n\r\n            do {\r\n                nextPos = { x: nextPos.x, y: nextPos.y + 1 };\r\n                hdPoints += settings.points.hardDrop;\r\n            } while (!board.collides({\r\n                matrix: player.shape.blocks,\r\n                position: nextPos\r\n            }));\r\n\r\n            newPosition = { x: nextPos.x, y: nextPos.y - 1 };\r\n            addScore(Math.min(\r\n                hdPoints - settings.points.hardDrop,\r\n                settings.points.hardDropMax));\r\n\r\n            hardDropped = true;\r\n            break;\r\n        default:\r\n            triggered = false;\r\n            break;\r\n    }\r\n\r\n    const posChanged = !pointEquals(player.position, newPosition);\r\n\r\n    if (posChanged) {\r\n        const newMatrix = {\r\n            matrix: player.shape.blocks,\r\n            position: newPosition\r\n        };\r\n\r\n        if (!board.collides(newMatrix)) {\r\n            player.position = newPosition;\r\n        }\r\n\r\n        if (matrixesColliding(board.blocks, newMatrix) || hardDropped) {\r\n            activateLoop();\r\n        }\r\n    }\r\n\r\n    if (triggered) {\r\n        panel.draw(getViewMatrix());\r\n    }\r\n\r\n    return triggered;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/key-handling.ts","import I from '../models/shapes/i';\r\nimport J from '../models/shapes/j';\r\nimport L from '../models/shapes/l';\r\nimport O from '../models/shapes/o';\r\nimport S from '../models/shapes/s';\r\nimport T from '../models/shapes/t';\r\nimport Z from '../models/shapes/z';\r\n\r\nconst shapes = [I, J, L, O, S, T, Z];\r\n\r\nexport default function getRandomShape() {\r\n    const Shape = shapes[Math.floor(Math.random() * shapes.length)];\r\n    return new Shape();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/random-shape.ts","import { resetScore } from './player-score';\r\nimport { board, player } from './storage';\r\n\r\nexport default function gameOver(): void {\r\n    board.clear();\r\n    player.reset();\r\n    resetScore();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/game-over.ts","import settings from '../settings';\r\nimport gameOver from './game-over';\r\nimport { addScore } from './player-score';\r\nimport { board, panel, player } from './storage';\r\nimport getViewMatrix from './view-matrix';\r\n\r\nfunction update(): void {\r\n    const newPos = {\r\n        x: player.position.x,\r\n        y: player.position.y + 1\r\n    };\r\n\r\n    if (!board.collides({ matrix: player.shape.blocks, position: newPos })) {\r\n        player.position = newPos;\r\n    } else {\r\n        // Colliding\r\n        board.place(player.shape, player.position);\r\n        const linesCleared = board.clearFullLines();\r\n\r\n        // Add points for cleared lines\r\n        if (linesCleared) {\r\n            const scoring = settings.points.linesCleared as { [lines: number]: number };\r\n            addScore(scoring[linesCleared]);\r\n        }\r\n\r\n        // Reset player\r\n        player.reset();\r\n        player.softDropPoints = 0;\r\n\r\n        // Detect immediate collision\r\n        if (board.collides({\r\n            matrix: player.shape.blocks,\r\n            position: player.position\r\n        })) {\r\n            gameOver();\r\n        }\r\n    }\r\n\r\n    panel.draw(getViewMatrix());\r\n}\r\n\r\n// Call update immediately\r\nlet interval: number;\r\nlet currentSeconds: number;\r\nexport function setLoopSpeed(seconds: number): void {\r\n    currentSeconds = seconds;\r\n\r\n    window.clearInterval(interval);\r\n    update();\r\n    interval = window.setInterval(update, seconds * 1000);\r\n}\r\n\r\nexport function activateLoop(): void {\r\n    setLoopSpeed(currentSeconds);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/gameloop.ts","import { onScoreChange } from '../services/player-score';\r\n\r\nlet scoreEl: HTMLSpanElement;\r\n\r\nexport default function loadPlayerScore(): void {\r\n    scoreEl = document.getElementById('player-score') as HTMLSpanElement;\r\n    onScoreChange(score => {\r\n        scoreEl.textContent = score.toLocaleString();\r\n    }, true);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/components/player-score.ts","const settings = {\r\n\r\n    // Per drops per second\r\n    gameSpeed: 0.4,\r\n\r\n    points: {\r\n        // Amount of lines cleared at once\r\n        linesCleared: {\r\n            1: 40,\r\n            2: 100,\r\n            3: 300,\r\n            4: 1200\r\n        },\r\n\r\n        // Points per cell dropped\r\n        softDrop: 1,\r\n        hardDrop: 2,\r\n\r\n        // Max drop points per turn\r\n        softDropMax: 20,\r\n        hardDropMax: 40\r\n    },\r\n\r\n    debug: {\r\n        // Draw full shape square\r\n        drawEmptyTiles: false,\r\n        emptyTileColor: '#f1f1f1'\r\n    }\r\n};\r\n\r\nexport default settings;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/settings.ts","import Matrix from '../interfaces/matrix';\r\nimport { ISize } from '../interfaces/size';\r\nimport drawGrid from '../services/draw-grid';\r\nimport drawMatrix from '../services/draw-matrix';\r\nimport { getMatrixSize } from '../services/matrix-calculations';\r\n\r\nexport default class Panel {\r\n    public readonly ctx: CanvasRenderingContext2D;\r\n    public readonly size: ISize;\r\n    public readonly pixelRatio: number;\r\n\r\n    constructor(id: string) {\r\n        const canvas = document.getElementById(id) as HTMLCanvasElement;\r\n        this.pixelRatio = devicePixelRatio || 1;\r\n\r\n        // Read canvas size\r\n        this.size = {\r\n            width: parseInt(canvas.getAttribute('width') as string, 10) * this.pixelRatio,\r\n            height: parseInt(canvas.getAttribute('height') as string, 10) * this.pixelRatio\r\n        };\r\n\r\n        // Fix scaling for small viewports\r\n        if (this.size.width !== canvas.offsetWidth) {\r\n            canvas.setAttribute('width', `${this.size.width}`);\r\n        }\r\n\r\n        if (this.size.height !== canvas.offsetHeight) {\r\n            canvas.setAttribute('height', `${this.size.height}`);\r\n        }\r\n\r\n        // Get drawing context\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) throw new Error('Context not found!');\r\n        this.ctx = ctx;\r\n    }\r\n\r\n    public draw(matrix: Matrix): void {\r\n        this.clear();\r\n        drawGrid(this, getMatrixSize(matrix));\r\n        drawMatrix(this, matrix);\r\n    }\r\n\r\n    private clear(): void {\r\n        this.ctx.clearRect(0, 0, this.size.width, this.size.height);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/components/panel.ts","import Matrix from '../interfaces/matrix';\r\nimport IPoint from '../interfaces/point';\r\nimport IPositionedMatrix from '../interfaces/positioned-matrix';\r\nimport { ISize } from '../interfaces/size';\r\nimport { matrixContains, matrixesColliding, mergeMatrixes } from '../services/matrix-calculations';\r\nimport Shape from './shape';\r\n\r\nexport default class Board {\r\n    private _blocks: Matrix;\r\n    public get blocks() { return this._blocks; }\r\n\r\n    public readonly size: ISize;\r\n\r\n    constructor(size: ISize) {\r\n        this.size = size;\r\n        this.clear();\r\n    }\r\n\r\n    public place(shape: Shape, position: IPoint): void {\r\n        mergeMatrixes(this.blocks, {\r\n            matrix: shape.blocks,\r\n            position\r\n        }, this.blocks);\r\n    }\r\n\r\n    public clearFullLines(): number {\r\n        const fullRows = this.getFullLines();\r\n        fullRows.forEach(row => this.deleteRow(row));\r\n        return fullRows.length;\r\n    }\r\n\r\n    private getFullLines(): number[] {\r\n        const rowCount = this._blocks[0].length;\r\n        const incompleteRows = new Array<boolean>(rowCount - 1);\r\n\r\n        rows:\r\n        for (let y = 0; y < rowCount; y++) {\r\n            for (const col of this._blocks) {\r\n                if (!col[y]) {\r\n                    incompleteRows[y] = true;\r\n                    continue rows;\r\n                }\r\n            }\r\n        }\r\n\r\n        const result: number[] = [];\r\n        for (let row = 0; row < rowCount; row++) {\r\n            if (!incompleteRows[row]) result.push(row);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private deleteRow(row: number): void {\r\n        this._blocks.forEach(col => {\r\n            col.splice(row, 1);\r\n            col.unshift(undefined);\r\n        });\r\n    }\r\n\r\n    public clear(): void {\r\n        this._blocks = [];\r\n        for (let x = 0; x < this.size.width; x++) {\r\n            this._blocks[x] = new Array(this.size.height);\r\n        }\r\n    }\r\n\r\n    public contains(matrix: IPositionedMatrix): boolean {\r\n        return matrixContains(this._blocks, matrix);\r\n    }\r\n\r\n    public collides(matrix: IPositionedMatrix): boolean {\r\n        return !this.contains(matrix)\r\n            || matrixesColliding(this.blocks, matrix);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/board.ts","export default class Timer {\r\n    private _handle: number | void;\r\n    private readonly _handler: () => void;\r\n    private readonly _interval: number;\r\n    private readonly _repeat: boolean;\r\n\r\n    constructor(handler: () => void, interval: number, repeat = true) {\r\n        this._handler = handler;\r\n        this._interval = interval;\r\n        this._repeat = repeat;\r\n    }\r\n\r\n    public start(executeOnInit = false): void {\r\n        if (executeOnInit) {\r\n            this._handler();\r\n            if (!this._repeat) return;\r\n        }\r\n\r\n        this.stop();\r\n        this._handle = (\r\n            this._repeat\r\n                ? setInterval\r\n                : setTimeout\r\n        )(this._handler, this._interval);\r\n    }\r\n\r\n    public stop(): void {\r\n        this._handle = (\r\n            this._repeat\r\n                ? clearInterval\r\n                : clearTimeout\r\n        )(this._handle as number);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/timer.ts","export default class UniqueArray<T> {\r\n    private _array: T[] = [];\r\n\r\n    public get count() { return this._array.length; }\r\n    public get values() { return this._array; }\r\n\r\n    public add(value: T): void {\r\n        if (!this.contains(value)) {\r\n            this._array.push(value);\r\n        }\r\n    }\r\n\r\n    public remove(value: T): void {\r\n        const index = this._array.indexOf(value);\r\n        if (index >= 0) {\r\n            this._array.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public contains(value: T): boolean {\r\n        return this._array.indexOf(value) >= 0;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/unique-array.ts","import Matrix from '../interfaces/matrix';\r\nimport { rotateMatrix } from '../services/matrix-calculations';\r\n\r\nexport default class Shape {\r\n    private _blocks: Matrix;\r\n    public get blocks() {\r\n        return this._blocks;\r\n    }\r\n\r\n    constructor(blocks: Matrix) {\r\n        this._blocks = blocks;\r\n    }\r\n\r\n    public rotate(reverse = false): void {\r\n        this._blocks = rotateMatrix(this._blocks, reverse);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shape.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Blue;\r\n\r\nexport default class I extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0],\r\n            [0, c, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/i.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Pink;\r\n\r\nexport default class J extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0],\r\n            [0, c, 0],\r\n            [c, c, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/j.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Orange;\r\n\r\nexport default class L extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, 0],\r\n            [0, c, 0],\r\n            [0, c, c]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/l.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Yellow;\r\n\r\nexport default class O extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c],\r\n            [c, c]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/o.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Red;\r\n\r\nexport default class S extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, c, c],\r\n            [c, c, 0],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/s.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Purple;\r\n\r\nexport default class T extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c, c],\r\n            [0, c, 0],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/t.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nconst c = Color.Green;\r\n\r\nexport default class Z extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [c, c, 0],\r\n            [0, c, c],\r\n            [0, 0, 0]\r\n        ]));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/z.ts","import IPoint, { clonePoint } from '../interfaces/point';\r\nimport { resetControls } from '../services/key-handling';\r\nimport getRandomShape from '../services/random-shape';\r\nimport Shape from './shape';\r\n\r\nexport default class Player {\r\n    private _shape: Shape;\r\n    public get shape() {\r\n        return this._shape;\r\n    }\r\n\r\n    public position: IPoint;\r\n    private _startingPos: IPoint;\r\n\r\n    public softDropPoints = 0;\r\n\r\n    constructor(startingPosition: IPoint) {\r\n        this._startingPos = startingPosition;\r\n        this.reset();\r\n    }\r\n\r\n    public reset(): void {\r\n        this.position = clonePoint(this._startingPos);\r\n        this._shape = getRandomShape();\r\n        resetControls();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/player.ts","import Panel from '../components/panel';\r\nimport Board from '../models/board';\r\nimport Player from '../models/player';\r\n\r\nconst boardSize = {\r\n    width: 10,\r\n    height: 20\r\n};\r\n\r\nexport const player = new Player({ x: boardSize.width / 2 - 1, y: 0 });\r\nexport const panel = new Panel('game');\r\nexport const board = new Board(boardSize);\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/storage.ts","import loadPlayerScore from './components/player-score';\r\nimport { setLoopSpeed } from './services/gameloop';\r\nimport handleKeys from './services/key-handling';\r\nimport settings from './settings';\r\nimport './vendor/modernizr.min.js';\r\n\r\nsetLoopSpeed(settings.gameSpeed);\r\nhandleKeys();\r\nloadPlayerScore();\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/index.ts"],"sourceRoot":""}