{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap d575996bb86a061a3cdc","webpack:///./src/interfaces/point.ts","webpack:///./src/services/matrix-calculations.ts","webpack:///./src/services/arrays.ts","webpack:///./src/services/clear-panel.ts","webpack:///./src/services/draw-grid.ts","webpack:///./src/services/draw-matrix.ts","webpack:///./src/services/random-shape.ts","webpack:///./src/index.ts","webpack:///./src/models/board.ts","webpack:///./src/models/color.ts","webpack:///./src/models/player.ts","webpack:///./src/models/shape.ts","webpack:///./src/models/shapes/i.ts","webpack:///./src/models/shapes/j.ts","webpack:///./src/models/shapes/l.ts","webpack:///./src/models/shapes/o.ts","webpack:///./src/models/shapes/s.ts","webpack:///./src/models/shapes/t.ts","webpack:///./src/models/shapes/z.ts","webpack:///./src/models/panel.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","clonePoint","point","x","y","createMatrix","size","result","col","width","Array","height","copyMatrix","matrix","reduce","slice","addMatrix","target","source","position","length","value","mergeMatrixes","m1","m2","j","xyMatrix","rotateMatrix","reverse","matrixContains","parent","child","matrixesColliding","findIndex","array","predicate","findAny","clearPanel","panel","ctx","clearRect","drawGrid","gridSize","tileSize","strokeStyle","beginPath","moveTo","lineTo","stroke","drawMatrix","forEach","item","fillStyle","fillRect","getRandomShape","Shape","shapes","Math","floor","random","update","newPos","player","src_board","collides","shape","blocks","place","startingPoint","draw","viewMatrix","boardSize","Color","board_Board","Board","this","clear","_blocks","contains","board_defaultExport","player_Player","Player","getContainedPosition","board","xLow","xHigh","player_defaultExport","shape_Shape","color","rotate","shape_defaultExport","__extends","extendStatics","setPrototypeOf","__proto__","b","__","constructor","create","i_I","_super","I","Blue","i_defaultExport","j___extends","j_J","J","Orange","j_defaultExport","l___extends","l_L","L","l_defaultExport","o___extends","o_O","O","Yellow","o_defaultExport","s___extends","s_S","S","Red","s_defaultExport","t___extends","t_T","T","t_defaultExport","z___extends","z_Z","Z","Green","z_defaultExport","ctxSize","canvasID","canvas","document","getElementById","Error","getContext","window","setInterval","addEventListener","e","newPosition","triggered","code","repeat"],"mappings":"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","file":"index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./src/interfaces/point.ts\nfunction clonePoint(point) {\r\n    return { x: point.x, y: point.y };\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/matrix-calculations.ts\nfunction createMatrix(size) {\r\n    var result = [];\r\n    for (var col = 0; col < size.width; col++) {\r\n        result[col] = new Array(size.height);\r\n    }\r\n    return result;\r\n}\r\nfunction copyMatrix(matrix) {\r\n    return matrix.reduce(function (result, col, x) {\r\n        result[x] = col.slice();\r\n        return result;\r\n    }, []);\r\n}\r\nfunction addMatrix(target, source, position) {\r\n    for (var x = 0; x < source.length; x++) {\r\n        for (var y = 0; y < source[0].length; y++) {\r\n            var value = source[x][y];\r\n            if (typeof value === 'undefined')\r\n                continue;\r\n            if (value || !target[x + position.x][y + position.y]) {\r\n                target[x + position.x][y + position.y] = value;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction mergeMatrixes(m1, m2, position) {\r\n    var result = copyMatrix(m1);\r\n    for (var i = 0; i < m2.length; i++) {\r\n        for (var j = 0; j < m2[0].length; j++) {\r\n            var value = m2[i][j];\r\n            if (typeof value === 'undefined')\r\n                continue;\r\n            var x = i + position.x;\r\n            var y = j + position.y;\r\n            if (x >= 0 && x < m1.length &&\r\n                y >= 0 && y < m1[0].length &&\r\n                (value || !result[x][y])) {\r\n                result[x][y] = value;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction xyMatrix(matrix) {\r\n    return rotateMatrix(matrix)\r\n        .reduce(function (result, col, x) {\r\n        result[x] = col.reverse();\r\n        return result;\r\n    }, []);\r\n}\r\nfunction rotateMatrix(matrix, reverse) {\r\n    if (reverse === void 0) { reverse = false; }\r\n    var l = matrix.length;\r\n    var result = createMatrix({ width: l, height: l });\r\n    for (var x = 0; x < l; x++) {\r\n        for (var y = 0; y < l; y++) {\r\n            result[x][y] = reverse\r\n                ? matrix[l - y - 1][x]\r\n                : matrix[y][l - x - 1];\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction matrixContains(parent, child, position) {\r\n    for (var i = 0; i < child.length; i++) {\r\n        var col = child[i];\r\n        for (var j = 0; j < col.length; j++) {\r\n            if (!col[j])\r\n                continue;\r\n            var x = i + position.x;\r\n            var y = j + position.y;\r\n            if (x < 0 || x >= parent.length ||\r\n                y < 0 || y >= parent[0].length) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction matrixesColliding(m1, m2, position) {\r\n    for (var x = 0; x < m2.length; x++) {\r\n        for (var y = 0; y < m2[0].length; y++) {\r\n            if (!m2[x][y])\r\n                continue;\r\n            if (m1[x + position.x][y + position.y]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/board.ts\n\r\nvar board_Board = (function () {\r\n    function Board(size) {\r\n        this.size = size;\r\n        this.clear();\r\n    }\r\n    Object.defineProperty(Board.prototype, \"blocks\", {\r\n        get: function () { return this._blocks; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Board.prototype.place = function (shape, position) {\r\n        addMatrix(this.blocks, shape.blocks, position);\r\n    };\r\n    Board.prototype.clear = function () {\r\n        this._blocks = [];\r\n        for (var x = 0; x < this.size.width; x++) {\r\n            this._blocks[x] = new Array(this.size.height);\r\n        }\r\n    };\r\n    Board.prototype.contains = function (matrix, position) {\r\n        return matrixContains(this._blocks, matrix, position);\r\n    };\r\n    Board.prototype.collides = function (matrix, position) {\r\n        return !this.contains(matrix, position)\r\n            || matrixesColliding(this.blocks, matrix, position);\r\n    };\r\n    return Board;\r\n}());\r\n/* harmony default export */ var board_defaultExport = (board_Board);\r\n\n// CONCATENATED MODULE: ./src/models/panel.ts\nfunction getPanel(canvasID, size) {\r\n    var canvas = document.getElementById(canvasID);\r\n    if (!canvas)\r\n        throw new Error('Canvas not found!');\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        throw new Error('Context not found!');\r\n    return { ctx: ctx, size: size };\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/arrays.ts\nfunction findIndex(array, predicate) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        var value = array[i];\r\n        if (predicate(value, i)) {\r\n            return i;\r\n        }\r\n    }\r\n}\r\nfunction findAny(array, predicate) {\r\n    return typeof findIndex(array, predicate) !== 'undefined';\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/player.ts\n\r\n\r\nvar player_Player = (function () {\r\n    function Player(shape, position) {\r\n        this.shape = shape;\r\n        this.position = position;\r\n    }\r\n    Player.prototype.getContainedPosition = function (board) {\r\n        var position = clonePoint(this.position);\r\n        var xLow = findIndex(this.shape.blocks, function (col) {\r\n            return findAny(col, function (value) { return !!value; });\r\n        }) + position.x;\r\n        if (xLow < 0) {\r\n            position.x += 0 - xLow;\r\n            return position;\r\n        }\r\n        var xHigh = this.shape.blocks.length -\r\n            findIndex(this.shape.blocks.reverse(), function (col) {\r\n                return findAny(col, function (value) { return !!value; });\r\n            }) + position.x;\r\n        if (xHigh > board.blocks.length) {\r\n            position.x -= xHigh - board.blocks.length;\r\n            return position;\r\n        }\r\n        return position;\r\n    };\r\n    return Player;\r\n}());\r\n/* harmony default export */ var player_defaultExport = (player_Player);\r\n\n// CONCATENATED MODULE: ./src/services/clear-panel.ts\nfunction clearPanel(panel) {\r\n    panel.ctx.clearRect(0, 0, panel.size.width, panel.size.height);\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/draw-grid.ts\nfunction drawGrid(panel, gridSize) {\r\n    var tileSize = {\r\n        width: panel.size.width / gridSize.width,\r\n        height: panel.size.height / gridSize.height\r\n    };\r\n    var ctx = panel.ctx;\r\n    ctx.strokeStyle = '#efefef';\r\n    for (var x = 0; x < panel.size.width; x += tileSize.width) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, panel.size.height);\r\n        ctx.stroke();\r\n    }\r\n    for (var y = 0; y < panel.size.height; y += tileSize.height) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, y);\r\n        ctx.lineTo(panel.size.width, y);\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n// CONCATENATED MODULE: ./src/services/draw-matrix.ts\nfunction drawMatrix(panel, matrix, tileSize) {\r\n    matrix.forEach(function (col, x) { return col.forEach(function (item, y) {\r\n        if (typeof item === 'undefined')\r\n            return;\r\n        panel.ctx.fillStyle = item ? '#000' : '#8ED6FF';\r\n        panel.ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);\r\n    }); });\r\n}\r\n\n// CONCATENATED MODULE: ./src/models/color.ts\nvar Color;\r\n(function (Color) {\r\n    Color[\"Yellow\"] = \"yellow\";\r\n    Color[\"Blue\"] = \"blue\";\r\n    Color[\"Red\"] = \"red\";\r\n    Color[\"Green\"] = \"green\";\r\n    Color[\"Orange\"] = \"orange\";\r\n    Color[\"Pink\"] = \"pink\";\r\n    Color[\"Purple\"] = \"purple\";\r\n})(Color || (Color = {}));\r\n\n// CONCATENATED MODULE: ./src/models/shape.ts\n\r\nvar shape_Shape = (function () {\r\n    function Shape(blocks, color) {\r\n        this._blocks = blocks;\r\n        this.color = color;\r\n    }\r\n    Object.defineProperty(Shape.prototype, \"blocks\", {\r\n        get: function () {\r\n            return this._blocks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Shape.prototype.rotate = function (reverse) {\r\n        if (reverse === void 0) { reverse = false; }\r\n        this._blocks = rotateMatrix(this._blocks, reverse);\r\n    };\r\n    return Shape;\r\n}());\r\n/* harmony default export */ var shape_defaultExport = (shape_Shape);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/i.ts\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar i_I = (function (_super) {\r\n    __extends(I, _super);\r\n    function I() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0]\r\n        ]), Color.Blue) || this;\r\n    }\r\n    return I;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var i_defaultExport = (i_I);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/j.ts\nvar j___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar j_J = (function (_super) {\r\n    j___extends(J, _super);\r\n    function J() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, 1, 0],\r\n            [0, 1, 0],\r\n            [1, 1, 0]\r\n        ]), Color.Orange) || this;\r\n    }\r\n    return J;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var j_defaultExport = (j_J);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/l.ts\nvar l___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar l_L = (function (_super) {\r\n    l___extends(L, _super);\r\n    function L() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, 1, 0],\r\n            [0, 1, 0],\r\n            [0, 1, 1]\r\n        ]), Color.Orange) || this;\r\n    }\r\n    return L;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var l_defaultExport = (l_L);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/o.ts\nvar o___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar o_O = (function (_super) {\r\n    o___extends(O, _super);\r\n    function O() {\r\n        return _super.call(this, xyMatrix([\r\n            [1, 1],\r\n            [1, 1]\r\n        ]), Color.Yellow) || this;\r\n    }\r\n    return O;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var o_defaultExport = (o_O);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/s.ts\nvar s___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar s_S = (function (_super) {\r\n    s___extends(S, _super);\r\n    function S() {\r\n        return _super.call(this, xyMatrix([\r\n            [0, 1, 1],\r\n            [1, 1, 0],\r\n            [0, 0, 0]\r\n        ]), Color.Red) || this;\r\n    }\r\n    return S;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var s_defaultExport = (s_S);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/t.ts\nvar t___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar t_T = (function (_super) {\r\n    t___extends(T, _super);\r\n    function T() {\r\n        return _super.call(this, xyMatrix([\r\n            [1, 1, 1],\r\n            [0, 1, 0],\r\n            [0, 0, 0]\r\n        ]), Color.Orange) || this;\r\n    }\r\n    return T;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var t_defaultExport = (t_T);\r\n\n// CONCATENATED MODULE: ./src/models/shapes/z.ts\nvar z___extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar z_Z = (function (_super) {\r\n    z___extends(Z, _super);\r\n    function Z() {\r\n        return _super.call(this, xyMatrix([\r\n            [1, 1, 0],\r\n            [0, 1, 1],\r\n            [0, 0, 0]\r\n        ]), Color.Green) || this;\r\n    }\r\n    return Z;\r\n}(shape_defaultExport));\r\n/* harmony default export */ var z_defaultExport = (z_Z);\r\n\n// CONCATENATED MODULE: ./src/services/random-shape.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar shapes = [i_defaultExport, j_defaultExport, l_defaultExport, o_defaultExport, s_defaultExport, t_defaultExport, z_defaultExport];\r\nfunction getRandomShape() {\r\n    var Shape = shapes[Math.floor(Math.random() * shapes.length)];\r\n    return new Shape();\r\n}\r\n\n// CONCATENATED MODULE: ./src/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar ctxSize = { width: 400, height: 600 };\r\nvar tileSize = 20;\r\nvar boardSize = {\r\n    width: ctxSize.width / tileSize,\r\n    height: ctxSize.height / tileSize\r\n};\r\nvar panel = getPanel('game', ctxSize);\r\nvar src_board = new board_defaultExport(boardSize);\r\nvar startingPoint = { x: 9, y: 0 };\r\nvar player = new player_defaultExport(getRandomShape(), clonePoint(startingPoint));\r\nfunction update() {\r\n    var newPos = {\r\n        x: player.position.x,\r\n        y: player.position.y + 1\r\n    };\r\n    if (src_board.collides(player.shape.blocks, newPos)) {\r\n        src_board.place(player.shape, player.position);\r\n        player.shape = getRandomShape();\r\n        player.position = clonePoint(startingPoint);\r\n    }\r\n    else {\r\n        player.position = newPos;\r\n    }\r\n    draw();\r\n}\r\nfunction draw() {\r\n    var viewMatrix = mergeMatrixes(src_board.blocks, player.shape.blocks, player.position);\r\n    clearPanel(panel);\r\n    drawGrid(panel, boardSize);\r\n    drawMatrix(panel, viewMatrix, tileSize);\r\n}\r\nupdate();\r\nwindow.setInterval(update, 500);\r\ndocument.addEventListener('keydown', function (e) {\r\n    var newPosition = {\r\n        x: player.position.x,\r\n        y: player.position.y\r\n    };\r\n    var triggered = true;\r\n    switch (e.code) {\r\n        case 'ArrowUp':\r\n            if (e.repeat)\r\n                return;\r\n            player.shape.rotate();\r\n            if (!src_board.contains(player.shape.blocks, newPosition)) {\r\n                newPosition = player.getContainedPosition(src_board);\r\n            }\r\n            break;\r\n        case 'ArrowRight':\r\n            newPosition.x++;\r\n            break;\r\n        case 'ArrowDown':\r\n            newPosition.y++;\r\n            break;\r\n        case 'ArrowLeft':\r\n            newPosition.x--;\r\n            break;\r\n        default:\r\n            triggered = false;\r\n            break;\r\n    }\r\n    if (triggered) {\r\n        if (!src_board.collides(player.shape.blocks, newPosition)) {\r\n            player.position = newPosition;\r\n        }\r\n        draw();\r\n    }\r\n});\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d575996bb86a061a3cdc","export default interface IPoint {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport function clonePoint(point: IPoint): IPoint {\r\n    return { x: point.x, y: point.y };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/interfaces/point.ts","import Matrix from '../interfaces/matrix';\r\nimport IPoint from '../interfaces/point';\r\nimport { ISize } from '../interfaces/size';\r\n\r\nexport function createMatrix(size: ISize): Matrix {\r\n    const result: Matrix = [];\r\n    for (let col = 0; col < size.width; col++) {\r\n        result[col] = new Array(size.height);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function copyMatrix(matrix: Matrix): Matrix {\r\n    return matrix.reduce<Matrix>((result, col, x) => {\r\n        result[x] = col.slice();\r\n        return result;\r\n    }, []);\r\n}\r\n\r\nexport function addMatrix(target: Matrix, source: Matrix, position: IPoint): void {\r\n    for (let x = 0; x < source.length; x++) {\r\n        for (let y = 0; y < source[0].length; y++) {\r\n            const value = source[x][y];\r\n            if (typeof value === 'undefined') continue;\r\n\r\n            if (value || !target[x + position.x][y + position.y]) {\r\n                target[x + position.x][y + position.y] = value;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Merges m1 and m2 into a new matrix with the size of m1\r\n * @param position Position of m2 on m1\r\n */\r\nexport function mergeMatrixes(m1: Matrix, m2: Matrix, position: IPoint): Matrix {\r\n    const result = copyMatrix(m1);\r\n\r\n    for (let i = 0; i < m2.length; i++) {\r\n        for (let j = 0; j < m2[0].length; j++) {\r\n            const value = m2[i][j];\r\n            if (typeof value === 'undefined') continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x >= 0 && x < m1.length &&\r\n                y >= 0 && y < m1[0].length &&\r\n                (value || !result[x][y])) {\r\n                result[x][y] = value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Transforms matrix to be used in the coordinate system\r\n */\r\nexport function xyMatrix(matrix: Matrix): Matrix {\r\n    return rotateMatrix(matrix)\r\n        .reduce<Matrix>((result, col, x) => {\r\n            // Flip columns\r\n            result[x] = col.reverse();\r\n            return result;\r\n        }, []);\r\n}\r\n\r\n/**\r\n * Rotate a square 2D matrix\r\n */\r\nexport function rotateMatrix(matrix: Matrix, reverse = false): Matrix {\r\n    const l = matrix.length;\r\n    const result = createMatrix({ width: l, height: l });\r\n\r\n    // Apply rotation\r\n    for (let x = 0; x < l; x++) {\r\n        for (let y = 0; y < l; y++) {\r\n            result[x][y] = reverse\r\n                ? matrix[l - y - 1][x]\r\n                : matrix[y][l - x - 1];\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Checks if child is not outside parent matrix\r\n */\r\nexport function matrixContains(parent: Matrix, child: Matrix, position: IPoint): boolean {\r\n    for (let i = 0; i < child.length; i++) {\r\n        const col = child[i];\r\n        for (let j = 0; j < col.length; j++) {\r\n            if (!col[j]) continue;\r\n\r\n            const x = i + position.x;\r\n            const y = j + position.y;\r\n\r\n            if (x < 0 || x >= parent.length ||\r\n                y < 0 || y >= parent[0].length) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function matrixesColliding(m1: Matrix, m2: Matrix, position: IPoint): boolean {\r\n    for (let x = 0; x < m2.length; x++) {\r\n        for (let y = 0; y < m2[0].length; y++) {\r\n            if (!m2[x][y]) continue;\r\n            if (m1[x + position.x][y + position.y]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/matrix-calculations.ts","export function findIndex<T>(array: T[], predicate: (item: T, index: number) => boolean): number | undefined {\r\n    for (let i = 0; i < array.length; i++) {\r\n        const value = array[i];\r\n        if (predicate(value, i)) {\r\n            return i;\r\n        }\r\n    }\r\n}\r\n\r\nexport function findAny<T>(array: T[], predicate: (item: T, index: number) => boolean): boolean {\r\n    return typeof findIndex(array, predicate) !== 'undefined';\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/arrays.ts","import IPanel from '../models/panel';\r\n\r\nexport default function clearPanel(panel: IPanel): void {\r\n    panel.ctx.clearRect(0, 0, panel.size.width, panel.size.height);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/clear-panel.ts","import { ISize } from '../interfaces/size';\r\nimport IPanel from '../models/panel';\r\n\r\nexport default function drawGrid(panel: IPanel, gridSize: ISize): void {\r\n    const tileSize: ISize = {\r\n        width: panel.size.width / gridSize.width,\r\n        height: panel.size.height / gridSize.height\r\n    };\r\n\r\n    const { ctx } = panel;\r\n    ctx.strokeStyle = '#efefef';\r\n\r\n    for (let x = 0; x < panel.size.width; x += tileSize.width) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, 0);\r\n        ctx.lineTo(x, panel.size.height);\r\n        ctx.stroke();\r\n    }\r\n\r\n    for (let y = 0; y < panel.size.height; y += tileSize.height) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, y);\r\n        ctx.lineTo(panel.size.width, y);\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-grid.ts","import Matrix from '../interfaces/matrix';\r\nimport IPanel from '../models/panel';\r\n\r\nexport default function drawMatrix(panel: IPanel, matrix: Matrix, tileSize: number): void {\r\n    matrix.forEach((col, x) => col.forEach((item, y) => {\r\n        if (typeof item === 'undefined') return;\r\n        panel.ctx.fillStyle = item ? '#000' : '#8ED6FF';\r\n        panel.ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);\r\n    }));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/draw-matrix.ts","import I from '../models/shapes/i';\r\nimport J from '../models/shapes/j';\r\nimport L from '../models/shapes/l';\r\nimport O from '../models/shapes/o';\r\nimport S from '../models/shapes/s';\r\nimport T from '../models/shapes/t';\r\nimport Z from '../models/shapes/z';\r\n\r\nconst shapes = [I, J, L, O, S, T, Z];\r\n\r\nexport default function getRandomShape() {\r\n    const Shape = shapes[Math.floor(Math.random() * shapes.length)];\r\n    return new Shape();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/services/random-shape.ts","import { clonePoint } from './interfaces/point';\r\nimport { ISize } from './interfaces/size';\r\nimport Board from './models/board';\r\nimport { getPanel } from './models/panel';\r\nimport Player from './models/player';\r\nimport clearPanel from './services/clear-panel';\r\nimport drawGrid from './services/draw-grid';\r\nimport drawMatrix from './services/draw-matrix';\r\nimport { mergeMatrixes } from './services/matrix-calculations';\r\nimport getRandomShape from './services/random-shape';\r\n\r\n// Define sizes\r\nconst ctxSize: ISize = { width: 400, height: 600 };\r\nconst tileSize = 20;\r\nconst boardSize: ISize = {\r\n    width: ctxSize.width / tileSize,\r\n    height: ctxSize.height / tileSize\r\n};\r\n\r\n// Create panel\r\nconst panel = getPanel('game', ctxSize);\r\nconst board = new Board(boardSize);\r\n\r\n// Place a random shape\r\nconst startingPoint = { x: 9, y: 0 };\r\nconst player = new Player(getRandomShape(), clonePoint(startingPoint));\r\n\r\n// Update loop\r\nfunction update(): void {\r\n    // TODO: Only draw changes\r\n    const newPos = {\r\n        x: player.position.x,\r\n        y: player.position.y + 1\r\n    };\r\n\r\n    if (board.collides(player.shape.blocks, newPos)) {\r\n        board.place(player.shape, player.position);\r\n\r\n        player.shape = getRandomShape();\r\n        player.position = clonePoint(startingPoint);\r\n    } else {\r\n        player.position = newPos;\r\n    }\r\n\r\n    draw();\r\n}\r\n\r\nfunction draw(): void {\r\n    const viewMatrix = mergeMatrixes(board.blocks, player.shape.blocks, player.position);\r\n\r\n    clearPanel(panel);\r\n    drawGrid(panel, boardSize);\r\n    drawMatrix(panel, viewMatrix, tileSize);\r\n}\r\n\r\nupdate();\r\nwindow.setInterval(update, 500);\r\n\r\n// Key handling\r\ndocument.addEventListener('keydown', e => {\r\n\r\n    let newPosition = {\r\n        x: player.position.x,\r\n        y: player.position.y\r\n    };\r\n\r\n    let triggered = true;\r\n    switch (e.code) {\r\n        case 'ArrowUp':\r\n            if (e.repeat) return;\r\n            player.shape.rotate();\r\n\r\n            // Push shape back on to the board\r\n            if (!board.contains(player.shape.blocks, newPosition)) {\r\n                newPosition = player.getContainedPosition(board);\r\n            }\r\n\r\n            break;\r\n        case 'ArrowRight':\r\n            newPosition.x++;\r\n            break;\r\n        case 'ArrowDown':\r\n            newPosition.y++;\r\n            break;\r\n        case 'ArrowLeft':\r\n            newPosition.x--;\r\n            break;\r\n        default:\r\n            triggered = false;\r\n            break;\r\n    }\r\n\r\n    if (triggered) {\r\n        if (!board.collides(player.shape.blocks, newPosition)) {\r\n            player.position = newPosition;\r\n        }\r\n\r\n        draw();\r\n    }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/index.ts","import Matrix from '../interfaces/matrix';\r\nimport IPoint from '../interfaces/point';\r\nimport { ISize } from '../interfaces/size';\r\nimport { addMatrix, matrixContains, matrixesColliding } from '../services/matrix-calculations';\r\nimport Shape from './shape';\r\n\r\nexport default class Board {\r\n    private _blocks: Matrix;\r\n    public get blocks() { return this._blocks; }\r\n\r\n    public readonly size: ISize;\r\n\r\n    constructor(size: ISize) {\r\n        this.size = size;\r\n        this.clear();\r\n    }\r\n\r\n    public place(shape: Shape, position: IPoint) {\r\n        addMatrix(this.blocks, shape.blocks, position);\r\n    }\r\n\r\n    public clear(): void {\r\n        this._blocks = [];\r\n        for (let x = 0; x < this.size.width; x++) {\r\n            this._blocks[x] = new Array(this.size.height);\r\n        }\r\n    }\r\n\r\n    public contains(matrix: Matrix, position: IPoint): boolean {\r\n        return matrixContains(this._blocks, matrix, position);\r\n    }\r\n\r\n    public collides(matrix: Matrix, position: IPoint): boolean {\r\n        return !this.contains(matrix, position)\r\n            || matrixesColliding(this.blocks, matrix, position);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/board.ts","export enum Color {\r\n    Yellow = 'yellow',\r\n    Blue = 'blue',\r\n    Red = 'red',\r\n    Green = 'green',\r\n    Orange = 'orange',\r\n    Pink = 'pink',\r\n    Purple = 'purple'\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/color.ts","import IPoint, { clonePoint } from '../interfaces/point';\r\nimport { findAny, findIndex } from '../services/arrays';\r\nimport Board from './board';\r\nimport Shape from './shape';\r\n\r\nexport default class Player {\r\n    constructor(\r\n        public shape: Shape,\r\n        public position: IPoint\r\n    ) { }\r\n\r\n    /**\r\n     * Calculates a position for\r\n     * the player to be fully on the board\r\n     */\r\n    public getContainedPosition(board: Board): IPoint {\r\n        const position = clonePoint(this.position);\r\n\r\n        // Find lowest x value\r\n        const xLow = (findIndex(this.shape.blocks, col => {\r\n            // Column contains a value\r\n            return findAny(col, value => !!value);\r\n        }) as number) + position.x;\r\n\r\n        // Push shape to the right\r\n        if (xLow < 0) {\r\n            position.x += 0 - xLow;\r\n            return position;\r\n        }\r\n\r\n        // Find highest x value\r\n        const xHigh = this.shape.blocks.length -\r\n            (findIndex(this.shape.blocks.reverse(), col => {\r\n                // Column contains a value\r\n                return findAny(col, value => !!value);\r\n            }) as number) + position.x;\r\n\r\n        // Push shape to the left\r\n        if (xHigh > board.blocks.length) {\r\n            position.x -= xHigh - board.blocks.length;\r\n            return position;\r\n        }\r\n\r\n        return position;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/player.ts","import Matrix from '../interfaces/matrix';\r\nimport { rotateMatrix } from '../services/matrix-calculations';\r\nimport { Color } from './color';\r\n\r\nexport default class Shape {\r\n    private _blocks: Matrix;\r\n    public get blocks() {\r\n        return this._blocks;\r\n    }\r\n\r\n    public readonly color: Color;\r\n\r\n    constructor(blocks: Matrix, color: Color) {\r\n        this._blocks = blocks;\r\n        this.color = color;\r\n    }\r\n\r\n    public rotate(reverse = false): void {\r\n        this._blocks = rotateMatrix(this._blocks, reverse);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shape.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class I extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0],\r\n            [0, 1, 0, 0]\r\n        ]), Color.Blue);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/i.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class J extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, 1, 0],\r\n            [0, 1, 0],\r\n            [1, 1, 0]\r\n        ]), Color.Orange);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/j.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class L extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, 1, 0],\r\n            [0, 1, 0],\r\n            [0, 1, 1]\r\n        ]), Color.Orange);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/l.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class O extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [1, 1],\r\n            [1, 1]\r\n        ]), Color.Yellow);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/o.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class S extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [0, 1, 1],\r\n            [1, 1, 0],\r\n            [0, 0, 0]\r\n        ]), Color.Red);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/s.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class T extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [1, 1, 1],\r\n            [0, 1, 0],\r\n            [0, 0, 0]\r\n        ]), Color.Orange);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/t.ts","import { xyMatrix } from '../../services/matrix-calculations';\r\nimport { Color } from '../color';\r\nimport Shape from '../shape';\r\n\r\nexport default class Z extends Shape {\r\n    constructor() {\r\n        super(xyMatrix([\r\n            [1, 1, 0],\r\n            [0, 1, 1],\r\n            [0, 0, 0]\r\n        ]), Color.Green);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/shapes/z.ts","import { ISize } from '../interfaces/size';\r\n\r\nexport default interface IPanel {\r\n    ctx: CanvasRenderingContext2D;\r\n    size: ISize;\r\n}\r\n\r\nexport function getPanel(canvasID: string, size: ISize): IPanel {\r\n    const canvas = document.getElementById(canvasID) as HTMLCanvasElement;\r\n    if (!canvas) throw new Error('Canvas not found!');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) throw new Error('Context not found!');\r\n\r\n    return { ctx, size };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/models/panel.ts"],"sourceRoot":""}