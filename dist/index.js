!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";function r(t){return{x:t.x,y:t.y}}function o(t){for(var n=[],e=0;e<t.width;e++)n[e]=new Array(t.height);return n}function i(t){return t.reduce(function(t,n,e){return t[e]=n.slice(),t},[])}function c(t,n,e,r){for(var o=r||i(t),c=0;c<n.length;c++)for(var u=0;u<n[0].length;u++){var s=n[c][u];if(void 0!==s){var f=c+e.x,a=u+e.y;f>=0&&f<t.length&&a>=0&&a<t[0].length&&(s||!o[f][a])&&(o[f][a]=s)}}return o}function u(t,n,e){c(t,n,e,t)}function s(t){return f(t).reduce(function(t,n,e){return t[e]=n.reverse(),t},[])}function f(t,n){void 0===n&&(n=!1);for(var e=t.length,r=o({width:e,height:e}),i=0;i<e;i++)for(var c=0;c<e;c++)r[i][c]=n?t[e-c-1][i]:t[c][e-i-1];return r}function a(t,n,e){for(var r=0;r<n.length;r++)for(var o=n[r],i=0;i<o.length;i++)if(o[i]){var c=r+e.x,u=i+e.y;if(c<0||c>=t.length||u<0||u>=t[0].length)return!1}return!0}function h(t,n,e){for(var r=0;r<n.length;r++)for(var o=0;o<n[0].length;o++)if(n[r][o]&&t[r+e.x][o+e.y])return!0;return!1}function p(t,n){for(var e=0;e<t.length;e++){if(n(t[e],e))return e}}function l(t,n){return void 0!==p(t,n)}function _(t){t.ctx.clearRect(0,0,t.size.width,t.size.height)}function y(t,n){var e={width:t.size.width/n.width,height:t.size.height/n.height},r=t.ctx;r.strokeStyle="#efefef";for(var o=0;o<t.size.width;o+=e.width)r.beginPath(),r.moveTo(o,0),r.lineTo(o,t.size.height),r.stroke();for(var i=0;i<t.size.height;i+=e.height)r.beginPath(),r.moveTo(0,i),r.lineTo(t.size.width,i),r.stroke()}function d(t,n,e){var r=t.ctx;n.forEach(function(t,n){return t.forEach(function(t,o){void 0!==t&&(A.drawEmptyTiles||t)&&(r.fillStyle=t?b(t):"#8ED6FF",r.fillRect(n*e,o*e,e,e))})})}function b(t){switch(t){case O.Yellow:return"#ffeb3b";case O.Blue:return"#03a9f4";case O.Red:return"#f44336";case O.Green:return"#4caf50";case O.Orange:return"#ff9800";case O.Pink:return"#fbafbc";case O.Purple:return"#9c27b0";default:return"#000"}}function v(){return new(0,ot[Math.floor(Math.random()*ot.length)])}function w(){var t={x:ht.position.x,y:ht.position.y+1};ft.collides(ht.shape.blocks,t)?(ft.place(ht.shape,ht.position),ht.shape=v(),ht.position=r(at)):ht.position=t,g()}function g(){var t=c(ft.blocks,ht.shape.blocks,ht.position);_(st),y(st,ut),d(st,t,ct)}Object.defineProperty(n,"__esModule",{value:!0});var O,k=function(){function t(t){this.size=t,this.clear()}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.place=function(t,n){u(this.blocks,t.blocks,n)},t.prototype.clear=function(){this._blocks=[];for(var t=0;t<this.size.width;t++)this._blocks[t]=new Array(this.size.height)},t.prototype.contains=function(t,n){return a(this._blocks,t,n)},t.prototype.collides=function(t,n){return!this.contains(t,n)||h(this.blocks,t,n)},t}(),x=k,P=function(){function t(t,n){this.shape=t,this.position=n}return t.prototype.getContainedPosition=function(t){var n=r(this.position),e=p(this.shape.blocks,function(t){return l(t,function(t){return!!t})})+n.x;if(e<0)return n.x+=0-e,n;var o=this.shape.blocks.length-p(this.shape.blocks.reverse(),function(t){return l(t,function(t){return!!t})})+n.x;return o>t.blocks.length?(n.x-=o-t.blocks.length,n):n},t}(),j=P;!function(t){t[t.Yellow=1]="Yellow",t[t.Blue=2]="Blue",t[t.Red=3]="Red",t[t.Green=4]="Green",t[t.Orange=5]="Orange",t[t.Pink=6]="Pink",t[t.Purple=7]="Purple"}(O||(O={}));var m={drawEmptyTiles:!1},A=m,z=function(){function t(t){this._blocks=t}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.rotate=function(t){void 0===t&&(t=!1),this._blocks=f(this._blocks,t)},t}(),E=z,R=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),T=O.Blue,B=function(t){function n(){return t.call(this,s([[0,T,0,0],[0,T,0,0],[0,T,0,0],[0,T,0,0]]))||this}return R(n,t),n}(E),C=B,G=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),M=O.Pink,Y=function(t){function n(){return t.call(this,s([[0,M,0],[0,M,0],[M,M,0]]))||this}return G(n,t),n}(E),D=Y,F=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),I=O.Orange,L=function(t){function n(){return t.call(this,s([[0,I,0],[0,I,0],[0,I,I]]))||this}return F(n,t),n}(E),S=L,U=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),q=O.Yellow,H=function(t){function n(){return t.call(this,s([[q,q],[q,q]]))||this}return U(n,t),n}(E),J=H,K=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),N=O.Red,Q=function(t){function n(){return t.call(this,s([[0,N,N],[N,N,0],[0,0,0]]))||this}return K(n,t),n}(E),V=Q,W=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),X=O.Purple,Z=function(t){function n(){return t.call(this,s([[X,X,X],[0,X,0],[0,0,0]]))||this}return W(n,t),n}(E),$=Z,tt=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nt=O.Green,et=function(t){function n(){return t.call(this,s([[nt,nt,0],[0,nt,nt],[0,0,0]]))||this}return tt(n,t),n}(E),rt=et,ot=[C,D,S,J,V,$,rt],it={width:400,height:600},ct=25,ut={width:it.width/ct,height:it.height/ct},st=function(t,n){var e=document.getElementById(t);if(!e)throw new Error("Canvas not found!");var r=e.getContext("2d");if(!r)throw new Error("Context not found!");return{ctx:r,size:n}}("game",it),ft=new x(ut),at={x:7,y:0},ht=new j(v(),r(at));w(),window.setInterval(w,500),document.addEventListener("keydown",function(t){var n={x:ht.position.x,y:ht.position.y},e=!0;switch(t.code){case"ArrowUp":if(t.repeat)return;ht.shape.rotate(),ft.contains(ht.shape.blocks,n)||(n=ht.getContainedPosition(ft));break;case"ArrowRight":n.x++;break;case"ArrowDown":n.y++;break;case"ArrowLeft":n.x--;break;default:e=!1}e&&(ft.collides(ht.shape.blocks,n)||(ht.position=n),g())})}]);
//# sourceMappingURL=index.js.map