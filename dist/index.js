!function(t){function n(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var o={};n.m=t,n.c=o,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,o){"use strict";function e(t){return{x:t.x,y:t.y}}function r(t){for(var n=[],o=0;o<t.width;o++)n[o]=new Array(t.height);return n}function i(t){return t.reduce(function(t,n,o){return t[o]=n.slice(),t},[])}function c(t,n,o,e){for(var r=e||i(t),c=0;c<n.length;c++)for(var u=0;u<n[0].length;u++){var s=n[c][u];if(void 0!==s){var f=c+o.x,a=u+o.y;f>=0&&f<t.length&&a>=0&&a<t[0].length&&(s||!r[f][a])&&(r[f][a]=s)}}return r}function u(t,n,o){c(t,n,o,t)}function s(t){return f(t).reduce(function(t,n,o){return t[o]=n.reverse(),t},[])}function f(t,n){void 0===n&&(n=!1);for(var o=t.length,e=r({width:o,height:o}),i=0;i<o;i++)for(var c=0;c<o;c++)e[i][c]=n?t[o-c-1][i]:t[c][o-i-1];return e}function a(t,n,o){for(var e=0;e<n.length;e++)for(var r=n[e],i=0;i<r.length;i++)if(r[i]){var c=e+o.x,u=i+o.y;if(c<0||c>=t.length||u<0||u>=t[0].length)return!1}return!0}function h(t,n,o){for(var e=0;e<n.length;e++)for(var r=0;r<n[0].length;r++)if(n[e][r]&&t[e+o.x][r+o.y])return!0;return!1}function p(t,n){for(var o=0;o<t.length;o++){if(n(t[o],o))return o}}function l(t,n){return void 0!==p(t,n)}function _(t){t.ctx.clearRect(0,0,t.size.width,t.size.height)}function y(t,n){var o={width:t.size.width/n.width,height:t.size.height/n.height},e=t.ctx;e.strokeStyle="#efefef";for(var r=0;r<t.size.width;r+=o.width)e.beginPath(),e.moveTo(r,0),e.lineTo(r,t.size.height),e.stroke();for(var i=0;i<t.size.height;i+=o.height)e.beginPath(),e.moveTo(0,i),e.lineTo(t.size.width,i),e.stroke()}function d(t,n,o){n.forEach(function(n,e){return n.forEach(function(n,r){void 0!==n&&(t.ctx.fillStyle=n?"#000":"#8ED6FF",t.ctx.fillRect(e*o,r*o,o,o))})})}function v(){return new(0,Q[Math.floor(Math.random()*Q.length)])}function b(){var t={x:nt.position.x,y:nt.position.y+1};$.collides(nt.shape.blocks,t)?($.place(nt.shape,nt.position),nt.shape=v(),nt.position=e(tt)):nt.position=t,g()}function g(){var t=c($.blocks,nt.shape.blocks,nt.position);_(Z),y(Z,X),d(Z,t,W)}Object.defineProperty(n,"__esModule",{value:!0});var w,O=function(){function t(t){this.size=t,this.clear()}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.place=function(t,n){u(this.blocks,t.blocks,n)},t.prototype.clear=function(){this._blocks=[];for(var t=0;t<this.size.width;t++)this._blocks[t]=new Array(this.size.height)},t.prototype.contains=function(t,n){return a(this._blocks,t,n)},t.prototype.collides=function(t,n){return!this.contains(t,n)||h(this.blocks,t,n)},t}(),x=O,k=function(){function t(t,n){this.shape=t,this.position=n}return t.prototype.getContainedPosition=function(t){var n=e(this.position),o=p(this.shape.blocks,function(t){return l(t,function(t){return!!t})})+n.x;if(o<0)return n.x+=0-o,n;var r=this.shape.blocks.length-p(this.shape.blocks.reverse(),function(t){return l(t,function(t){return!!t})})+n.x;return r>t.blocks.length?(n.x-=r-t.blocks.length,n):n},t}(),P=k;!function(t){t.Yellow="yellow",t.Blue="blue",t.Red="red",t.Green="green",t.Orange="orange",t.Pink="pink",t.Purple="purple"}(w||(w={}));var j=function(){function t(t,n){this._blocks=t,this.color=n}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.rotate=function(t){void 0===t&&(t=!1),this._blocks=f(this._blocks,t)},t}(),A=j,z=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),m=function(t){function n(){return t.call(this,s([[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),w.Blue)||this}return z(n,t),n}(A),E=m,C=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),R=function(t){function n(){return t.call(this,s([[0,1,0],[0,1,0],[1,1,0]]),w.Orange)||this}return C(n,t),n}(A),M=R,T=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),B=function(t){function n(){return t.call(this,s([[0,1,0],[0,1,0],[0,1,1]]),w.Orange)||this}return T(n,t),n}(A),D=B,F=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),G=function(t){function n(){return t.call(this,s([[1,1],[1,1]]),w.Yellow)||this}return F(n,t),n}(A),I=G,L=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),S=function(t){function n(){return t.call(this,s([[0,1,1],[1,1,0],[0,0,0]]),w.Red)||this}return L(n,t),n}(A),Y=S,U=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),q=function(t){function n(){return t.call(this,s([[1,1,1],[0,1,0],[0,0,0]]),w.Orange)||this}return U(n,t),n}(A),H=q,J=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),K=function(t){function n(){return t.call(this,s([[1,1,0],[0,1,1],[0,0,0]]),w.Green)||this}return J(n,t),n}(A),N=K,Q=[E,M,D,I,Y,H,N],V={width:400,height:600},W=20,X={width:V.width/W,height:V.height/W},Z=function(t,n){var o=document.getElementById(t);if(!o)throw new Error("Canvas not found!");var e=o.getContext("2d");if(!e)throw new Error("Context not found!");return{ctx:e,size:n}}("game",V),$=new x(X),tt={x:9,y:0},nt=new P(v(),e(tt));b(),window.setInterval(b,500),document.addEventListener("keydown",function(t){var n={x:nt.position.x,y:nt.position.y},o=!0;switch(t.code){case"ArrowUp":if(t.repeat)return;nt.shape.rotate(),$.contains(nt.shape.blocks,n)||(n=nt.getContainedPosition($));break;case"ArrowRight":n.x++;break;case"ArrowDown":n.y++;break;case"ArrowLeft":n.x--;break;default:o=!1}o&&($.collides(nt.shape.blocks,n)||(nt.position=n),g())})}]);
//# sourceMappingURL=index.js.map