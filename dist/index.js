!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function o(t){z+=t,s()}function r(){z=0,s()}function i(t,e){void 0===e&&(e=!1),A.push(t),e&&t(z)}function s(){A.forEach(function(t){return t(z)})}function c(t){return{x:t.x,y:t.y}}function a(t,e){return t.x===e.x&&t.y===e.y}function u(t){for(var e=[],n=0;n<t.width;n++)e[n]=new Array(t.height);return e}function f(t){return t.reduce(function(t,e,n){return t[n]=e.slice(),t},[])}function h(t,e,n,o){for(var r=o||f(t),i=0;i<e.length;i++)for(var s=0;s<e[0].length;s++){var c=e[i][s];if(void 0!==c){var a=i+n.x,u=s+n.y;a>=0&&a<t.length&&u>=0&&u<t[0].length&&(c||!r[a][u])&&(r[a][u]=c)}}return r}function l(t,e,n){h(t,e,n,t)}function p(t){return d(t).reduce(function(t,e,n){return t[n]=e.reverse(),t},[])}function d(t,e){void 0===e&&(e=!1);for(var n=t.length,o=u({width:n,height:n}),r=0;r<n;r++)for(var i=0;i<n;i++)o[r][i]=e?t[n-i-1][r]:t[i][n-r-1];return o}function y(t,e,n){for(var o=0;o<e.length;o++)for(var r=e[o],i=0;i<r.length;i++)if(r[i]){var s=o+n.x,c=i+n.y;if(s<0||s>=t.length||c<0||c>=t[0].length)return!1}return!0}function v(t,e,n){for(var o=0;o<e.length;o++)for(var r=0;r<e[0].length;r++)if(e[o][r]&&t[o+n.x][r+n.y])return!0;return!1}function _(t,e){for(var n=0;n<t.length;n++){if(e(t[n],n))return n}}function g(t,e){return void 0!==_(t,e)}function b(){return new(0,ut[Math.floor(Math.random()*ut.length)])}function w(t){t.ctx.clearRect(0,0,t.size.width,t.size.height)}function x(t,e){var n={width:t.size.width/e.width,height:t.size.height/e.height},o=t.ctx;o.strokeStyle="#efefef",o.lineWidth=t.pixelRatio;for(var r=0;r<t.size.width;r+=n.width)o.beginPath(),o.moveTo(r,0),o.lineTo(r,t.size.height),o.stroke();for(var i=0;i<t.size.height;i+=n.height)o.beginPath(),o.moveTo(0,i),o.lineTo(t.size.width,i),o.stroke()}function m(t,e){var n=t.ctx,o={width:t.size.width/e.length,height:t.size.height/e[0].length};e.forEach(function(t,e){return t.forEach(function(t,r){void 0!==t&&(pt.drawEmptyTiles||t)&&(n.fillStyle=t?k(t):"#8ED6FF",n.fillRect(e*o.width,r*o.height,o.width,o.height))})})}function k(t){switch(t){case 1:return"#ffeb3b";case 2:return"#03a9f4";case 3:return"#f44336";case 4:return"#4caf50";case 5:return"#ff9800";case 6:return"#fbafbc";case 7:return"#9c27b0";default:return"#000"}}function O(){var t={x:xt.position.x,y:xt.position.y+1};if(wt.collides(xt.shape.blocks,t)){wt.place(xt.shape,xt.position);var e=wt.clearFullLines();if(e){o(pt.points.linesCleared[e])}xt.reset(),mt=0,wt.collides(xt.shape.blocks,xt.position)&&j()}else xt.position=t;P()}function P(){var t=h(wt.blocks,xt.shape.blocks,xt.position);w(bt),x(bt,gt),m(bt,t)}function C(){window.clearInterval(_t),O(),_t=window.setInterval(O,1e3*kt)}function j(){wt.clear(),xt.reset(),r()}Object.defineProperty(e,"__esModule",{value:!0});var T,z=0,A=[],E=function(){function t(t){this.size=t,this.clear()}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.place=function(t,e){l(this.blocks,t.blocks,e)},t.prototype.clearFullLines=function(){var t=this,e=this.getFullLines();return e.forEach(function(e){return t.deleteRow(e)}),e.length},t.prototype.getFullLines=function(){var t=this._blocks[0].length,e=new Array(t-1);t:for(var n=0;n<t;n++)for(var o=0;o<this._blocks.length;o++)if(!this._blocks[o][n]){e[n]=!0;continue t}for(var r=[],i=0;i<t;i++)e[i]||r.push(i);return r},t.prototype.deleteRow=function(t){this._blocks.forEach(function(e){e.splice(t,1),e.unshift(void 0)})},t.prototype.clear=function(){this._blocks=[];for(var t=0;t<this.size.width;t++)this._blocks[t]=new Array(this.size.height)},t.prototype.contains=function(t,e){return y(this._blocks,t,e)},t.prototype.collides=function(t,e){return!this.contains(t,e)||v(this.blocks,t,e)},t}(),S=E,D=function(){function t(t){this._blocks=t}return Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),t.prototype.rotate=function(t){void 0===t&&(t=!1),this._blocks=d(this._blocks,t)},t}(),I=D,L=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=2,R=function(t){function e(){return t.call(this,p([[0,M,0,0],[0,M,0,0],[0,M,0,0],[0,M,0,0]]))||this}return L(e,t),e}(I),F=R,B=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),N=6,W=function(t){function e(){return t.call(this,p([[0,N,0],[0,N,0],[N,N,0]]))||this}return B(e,t),e}(I),q=W,H=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=5,J=function(t){function e(){return t.call(this,p([[0,G,0],[0,G,0],[0,G,G]]))||this}return H(e,t),e}(I),U=J,K=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=1,V=function(t){function e(){return t.call(this,p([[Q,Q],[Q,Q]]))||this}return K(e,t),e}(I),X=V,Y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=3,$=function(t){function e(){return t.call(this,p([[0,Z,Z],[Z,Z,0],[0,0,0]]))||this}return Y(e,t),e}(I),tt=$,et=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=7,ot=function(t){function e(){return t.call(this,p([[nt,nt,nt],[0,nt,0],[0,0,0]]))||this}return et(e,t),e}(I),rt=ot,it=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=4,ct=function(t){function e(){return t.call(this,p([[st,st,0],[0,st,st],[0,0,0]]))||this}return it(e,t),e}(I),at=ct,ut=[F,q,U,X,tt,rt,at],ft=function(){function t(t){this._startingPos=t,this.reset()}return Object.defineProperty(t.prototype,"shape",{get:function(){return this._shape},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.position=c(this._startingPos),this._shape=b()},t.prototype.getContainedPosition=function(t){var e=c(this.position),n=_(this._shape.blocks,function(t){return g(t,function(t){return!!t})})+e.x;if(n<0)return e.x+=0-n,e;var o=this._shape.blocks.length-_(this._shape.blocks.reverse(),function(t){return g(t,function(t){return!!t})})+e.x;return o>t.blocks.length?(e.x-=o-t.blocks.length,e):e},t}(),ht=ft,lt={drawEmptyTiles:!1,points:{linesCleared:{1:40,2:100,3:300,4:1200},softDrop:1,hardDrop:2,softDropMax:20,hardDropMax:40}},pt=lt,dt=(n(1),document.getElementById("game")),yt=devicePixelRatio||1,vt={width:parseInt(dt.getAttribute("width"),10)*yt,height:parseInt(dt.getAttribute("height"),10)*yt};vt.width!==dt.offsetWidth&&dt.setAttribute("width",""+vt.width),vt.height!==dt.offsetHeight&&dt.setAttribute("height",""+vt.height);var _t,gt={width:16,height:24},bt=function(t,e,n){var o=document.getElementById(t);if(!o)throw new Error("Canvas not found!");var r=o.getContext("2d");if(!r)throw new Error("Context not found!");return{ctx:r,size:e,pixelRatio:n}}("game",vt,yt),wt=new S(gt),xt=new ht({x:7,y:0}),mt=0,kt=.5;C(),document.addEventListener("keydown",function(t){var e={x:xt.position.x,y:xt.position.y},n=!0;switch(t.code){case"ArrowUp":if(t.repeat)return;xt.shape.rotate(),wt.contains(xt.shape.blocks,e)||(e=xt.getContainedPosition(wt));break;case"ArrowRight":e.x++;break;case"ArrowDown":e.y++;var r=pt.points.softDrop;mt+=r,mt<pt.points.softDropMax&&o(r);break;case"ArrowLeft":e.x--;break;case"Space":var i=e,s=0;do{i={x:i.x,y:i.y+1},s+=pt.points.hardDrop}while(!wt.collides(xt.shape.blocks,i));e={x:i.x,y:i.y-1},o(Math.min(s-pt.points.hardDrop,pt.points.hardDropMax));break;default:n=!1}!a(xt.position,e)&&(wt.collides(xt.shape.blocks,e)?C():xt.position=e),n&&(t.preventDefault(),P())}),function(){T=document.getElementById("player-score"),i(function(t){T.textContent=t.toLocaleString()},!0)}()},function(t,e){/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-canvas-localstorage-serviceworker-sessionstorage-touchevents-webgl !*/
!function(t,e,n){function o(t,e){return typeof t===e}function r(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):l?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function i(){var t=e.body;return t||(t=r(l?"svg":"body"),t.fake=!0),t}function s(t,n,o,s){var c,a,u,f,l="modernizr",p=r("div"),d=i();if(parseInt(o,10))for(;o--;)u=r("div"),u.id=s?s[o]:l+(o+1),p.appendChild(u);return c=r("style"),c.type="text/css",c.id="s"+l,(d.fake?d:p).appendChild(c),d.appendChild(p),c.styleSheet?c.styleSheet.cssText=t:c.appendChild(e.createTextNode(t)),p.id=l,d.fake&&(d.style.background="",d.style.overflow="hidden",f=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),a=n(p,t),d.fake?(d.parentNode.removeChild(d),h.style.overflow=f,h.offsetHeight):p.parentNode.removeChild(p),!!a}var c=[],a={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){c.push({name:t,fn:e,options:n})},addAsyncTest:function(t){c.push({name:null,fn:t})}},u=function(){};u.prototype=a,u=new u,u.addTest("serviceworker","serviceWorker"in navigator),u.addTest("localstorage",function(){var t="modernizr";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}),u.addTest("sessionstorage",function(){var t="modernizr";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}});var f=[],h=e.documentElement,l="svg"===h.nodeName.toLowerCase();u.addTest("canvas",function(){var t=r("canvas");return!(!t.getContext||!t.getContext("2d"))}),u.addTest("webgl",function(){var e=r("canvas"),n="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return n in e?e[n]("webgl")||e[n]("experimental-webgl"):"WebGLRenderingContext"in t});var p=a._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];a._prefixes=p;var d=a.testStyles=s;u.addTest("touchevents",function(){var n;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)n=!0;else{var o=["@media (",p.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");d(o,function(t){n=9===t.offsetTop})}return n}),function(){var t,e,n,r,i,s,a;for(var h in c)if(c.hasOwnProperty(h)){if(t=[],e=c[h],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(r=o(e.fn,"function")?e.fn():e.fn,i=0;i<t.length;i++)s=t[i],a=s.split("."),1===a.length?u[a[0]]=r:(!u[a[0]]||u[a[0]]instanceof Boolean||(u[a[0]]=new Boolean(u[a[0]])),u[a[0]][a[1]]=r),f.push((r?"":"no-")+a.join("-"))}}(),delete a.addTest,delete a.addAsyncTest;for(var y=0;y<u._q.length;y++)u._q[y]();t.Modernizr=u}(window,document)}]);
//# sourceMappingURL=index.js.map